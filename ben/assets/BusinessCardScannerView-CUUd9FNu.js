import{d as T,Q as be,$ as he,p as w,_ as ue,l as R,g as e,j,k as O,o as p,w as u,m as V,P as G,aa as le,x as X,O as ie,f as m,ac as Ce,a8 as we,I as B,D as xe,E as ke,a1 as qe,a0 as Ee,c as P,y as te,a5 as Ge,z as Ae,ad as Je,a3 as Qe,n as Ye,G as Z,H as W,ae as Ze,a7 as Ie,q as de,s as se,a2 as We,e as _,af as Xe,ag as Se,ah as et,b as S,A as Le,ai as tt,u as Pe,B as ye,t as y,aj as at,h as E,ak as st,F as ot,r as nt}from"./index-ko5h9-23.js";import{C as pe}from"./CardImageId-9m3OyPHK.js";import{c as ne,d as re,_ as ve,a as me,b as ge}from"./CardTitle.vue_vue_type_script_setup_true_lang-ljUi42pa.js";import{_ as K}from"./index-BtrB5TcM.js";import{_ as Fe,a as $e}from"./index-DDnvhvOv.js";import{_ as rt}from"./index-Cwvh9FJQ.js";import{D as lt,g as it,F as ut,a as dt,u as ct,T as ft,c as oe,C as pt}from"./check-CFleqrDw.js";import"./Identifier-Yjt1Lx6E.js";const[ee,vt]=be("DialogRoot");var mt=T({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(o,{emit:t}){const a=o,r=he(a,"open",t,{defaultValue:a.defaultOpen,passive:a.open===void 0}),c=w(),d=w(),{modal:i}=ue(a);return vt({open:r,modal:i,openModal:()=>{r.value=!0},onOpenChange:l=>{r.value=l},onOpenToggle:()=>{r.value=!r.value},contentId:"",titleId:"",descriptionId:"",triggerElement:c,contentElement:d}),(l,s)=>R(l.$slots,"default",{open:e(r),close:()=>r.value=!1})}}),gt=mt,_t=T({__name:"DialogClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(o){const t=o;j();const a=ee();return(n,r)=>(p(),O(e(G),V(t,{type:n.as==="button"?"button":void 0,onClick:r[0]||(r[0]=c=>e(a).onOpenChange(!1))}),{default:u(()=>[R(n.$slots,"default")]),_:3},16,["type"]))}}),yt=_t,bt=T({__name:"DialogContentImpl",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:t}){const a=o,n=t,r=ee(),{forwardRef:c,currentElement:d}=j();return r.titleId||=le(void 0,"reka-dialog-title"),r.descriptionId||=le(void 0,"reka-dialog-description"),X(()=>{r.contentElement=d,ie()!==document.body&&(r.triggerElement.value=ie())}),(i,l)=>(p(),O(e(ut),{"as-child":"",loop:"",trapped:a.trapFocus,onMountAutoFocus:l[5]||(l[5]=s=>n("openAutoFocus",s)),onUnmountAutoFocus:l[6]||(l[6]=s=>n("closeAutoFocus",s))},{default:u(()=>[m(e(lt),V({id:e(r).contentId,ref:e(c),as:i.as,"as-child":i.asChild,"disable-outside-pointer-events":i.disableOutsidePointerEvents,role:"dialog","aria-describedby":e(r).descriptionId,"aria-labelledby":e(r).titleId,"data-state":e(it)(e(r).open.value)},i.$attrs,{onDismiss:l[0]||(l[0]=s=>e(r).onOpenChange(!1)),onEscapeKeyDown:l[1]||(l[1]=s=>n("escapeKeyDown",s)),onFocusOutside:l[2]||(l[2]=s=>n("focusOutside",s)),onInteractOutside:l[3]||(l[3]=s=>n("interactOutside",s)),onPointerDownOutside:l[4]||(l[4]=s=>n("pointerDownOutside",s))}),{default:u(()=>[R(i.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),Ve=bt,ht=T({__name:"DialogContentModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:t}){const a=o,n=t,r=ee(),c=Ce(n),{forwardRef:d,currentElement:i}=j();return dt(i),(l,s)=>(p(),O(Ve,V({...a,...e(c)},{ref:e(d),"trap-focus":e(r).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:s[0]||(s[0]=f=>{f.defaultPrevented||(f.preventDefault(),e(r).triggerElement.value?.focus())}),onPointerDownOutside:s[1]||(s[1]=f=>{const k=f.detail.originalEvent,I=k.button===0&&k.ctrlKey===!0;(k.button===2||I)&&f.preventDefault()}),onFocusOutside:s[2]||(s[2]=f=>{f.preventDefault()})}),{default:u(()=>[R(l.$slots,"default")]),_:3},16,["trap-focus"]))}}),Ct=ht,wt=T({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:t}){const a=o,r=Ce(t);j();const c=ee(),d=w(!1),i=w(!1);return(l,s)=>(p(),O(Ve,V({...a,...e(r)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:s[0]||(s[0]=f=>{f.defaultPrevented||(d.value||e(c).triggerElement.value?.focus(),f.preventDefault()),d.value=!1,i.value=!1}),onInteractOutside:s[1]||(s[1]=f=>{f.defaultPrevented||(d.value=!0,f.detail.originalEvent.type==="pointerdown"&&(i.value=!0));const k=f.target;e(c).triggerElement.value?.contains(k)&&f.preventDefault(),f.detail.originalEvent.type==="focusin"&&i.value&&f.preventDefault()})}),{default:u(()=>[R(l.$slots,"default")]),_:3},16))}}),xt=wt,kt=T({__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:t}){const a=o,n=t,r=ee(),c=Ce(n),{forwardRef:d}=j();return(i,l)=>(p(),O(e(we),{present:i.forceMount||e(r).open.value},{default:u(()=>[e(r).modal.value?(p(),O(Ct,V({key:0,ref:e(d)},{...a,...e(c),...i.$attrs}),{default:u(()=>[R(i.$slots,"default")]),_:3},16)):(p(),O(xt,V({key:1,ref:e(d)},{...a,...e(c),...i.$attrs}),{default:u(()=>[R(i.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),It=kt,St=T({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const t=ee();return ct(!0),j(),(a,n)=>(p(),O(e(G),{as:a.as,"as-child":a.asChild,"data-state":e(t).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:u(()=>[R(a.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),Ot=St,Tt=T({__name:"DialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const t=ee(),{forwardRef:a}=j();return(n,r)=>e(t)?.modal.value?(p(),O(e(we),{key:0,present:n.forceMount||e(t).open.value},{default:u(()=>[m(Ot,V(n.$attrs,{ref:e(a),as:n.as,"as-child":n.asChild}),{default:u(()=>[R(n.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):B("v-if",!0)}}),Dt=Tt,Ft=T({__name:"DialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(o){const t=o;return(a,n)=>(p(),O(e(ft),xe(ke(t)),{default:u(()=>[R(a.$slots,"default")]),_:3},16))}}),$t=Ft;const Rt="rovingFocusGroup.onEntryFocus",Bt={bubbles:!1,cancelable:!0},Mt={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ut(o,t){return t!=="rtl"?o:o==="ArrowLeft"?"ArrowRight":o==="ArrowRight"?"ArrowLeft":o}function qt(o,t,a){const n=Ut(o.key,a);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Mt[n]}function je(o,t=!1){const a=ie();for(const n of o)if(n===a||(n.focus({preventScroll:t}),ie()!==a))return}function Et(o,t){return o.map((a,n)=>o[(t+n)%o.length])}const[At,Lt]=be("RovingFocusGroup");var Pt=T({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(o,{expose:t,emit:a}){const n=o,r=a,{loop:c,orientation:d,dir:i}=ue(n),l=qe(i),s=he(n,"currentTabStopId",r,{defaultValue:n.defaultCurrentTabStopId,passive:n.currentTabStopId===void 0}),f=w(!1),k=w(!1),I=w(0),{getItems:x,CollectionSlot:F}=Ee({isProvider:!0});function U(M){const q=!k.value;if(M.currentTarget&&M.target===M.currentTarget&&q&&!f.value){const A=new CustomEvent(Rt,Bt);if(M.currentTarget.dispatchEvent(A),r("entryFocus",A),!A.defaultPrevented){const z=x().map(g=>g.ref).filter(g=>g.dataset.disabled!==""),J=z.find(g=>g.getAttribute("data-active")===""),Q=z.find(g=>g.getAttribute("data-highlighted")===""),Y=z.find(g=>g.id===s.value),N=[J,Q,Y,...z].filter(Boolean);je(N,n.preventScrollOnEntryFocus)}}k.value=!1}function $(){setTimeout(()=>{k.value=!1},1)}return t({getItems:x}),Lt({loop:c,dir:l,orientation:d,currentTabStopId:s,onItemFocus:M=>{s.value=M},onItemShiftTab:()=>{f.value=!0},onFocusableItemAdd:()=>{I.value++},onFocusableItemRemove:()=>{I.value--}}),(M,q)=>(p(),O(e(F),null,{default:u(()=>[m(e(G),{tabindex:f.value||I.value===0?-1:0,"data-orientation":e(d),as:M.as,"as-child":M.asChild,dir:e(l),style:{outline:"none"},onMousedown:q[0]||(q[0]=A=>k.value=!0),onMouseup:$,onFocus:U,onBlur:q[1]||(q[1]=A=>f.value=!1)},{default:u(()=>[R(M.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),Vt=Pt,jt=T({__name:"RovingFocusItem",props:{tabStopId:{type:String,required:!1},focusable:{type:Boolean,required:!1,default:!0},active:{type:Boolean,required:!1},allowShiftKey:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(o){const t=o,a=At(),n=le(),r=P(()=>t.tabStopId||n),c=P(()=>a.currentTabStopId.value===r.value),{getItems:d,CollectionItem:i}=Ee();X(()=>{t.focusable&&a.onFocusableItemAdd()}),te(()=>{t.focusable&&a.onFocusableItemRemove()});function l(s){if(s.key==="Tab"&&s.shiftKey){a.onItemShiftTab();return}if(s.target!==s.currentTarget)return;const f=qt(s,a.orientation.value,a.dir.value);if(f!==void 0){if(s.metaKey||s.ctrlKey||s.altKey||!t.allowShiftKey&&s.shiftKey)return;s.preventDefault();let k=[...d().map(I=>I.ref).filter(I=>I.dataset.disabled!=="")];if(f==="last")k.reverse();else if(f==="prev"||f==="next"){f==="prev"&&k.reverse();const I=k.indexOf(s.currentTarget);k=a.loop.value?Et(k,I+1):k.slice(I+1)}Ge(()=>je(k))}}return(s,f)=>(p(),O(e(i),null,{default:u(()=>[m(e(G),{tabindex:c.value?0:-1,"data-orientation":e(a).orientation.value,"data-active":s.active?"":void 0,"data-disabled":s.focusable?void 0:"",as:s.as,"as-child":s.asChild,onMousedown:f[0]||(f[0]=k=>{s.focusable?e(a).onItemFocus(r.value):k.preventDefault()}),onFocus:f[1]||(f[1]=k=>e(a).onItemFocus(r.value)),onKeydown:l},{default:u(()=>[R(s.$slots,"default")]),_:3},8,["tabindex","data-orientation","data-active","data-disabled","as","as-child"])]),_:3}))}}),zt=jt;const[Oe,Kt]=be("TabsRoot");var Nt=T({__name:"TabsRoot",props:{defaultValue:{type:null,required:!1},orientation:{type:String,required:!1,default:"horizontal"},dir:{type:String,required:!1},activationMode:{type:String,required:!1,default:"automatic"},modelValue:{type:null,required:!1},unmountOnHide:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["update:modelValue"],setup(o,{emit:t}){const a=o,n=t,{orientation:r,unmountOnHide:c,dir:d}=ue(a),i=qe(d);j();const l=he(a,"modelValue",n,{defaultValue:a.defaultValue,passive:a.modelValue===void 0}),s=w();return Kt({modelValue:l,changeModelValue:f=>{l.value=f},orientation:r,dir:i,unmountOnHide:c,activationMode:a.activationMode,baseId:le(void 0,"reka-tabs"),tabsList:s}),(f,k)=>(p(),O(e(G),{dir:e(i),"data-orientation":e(r),"as-child":f.asChild,as:f.as},{default:u(()=>[R(f.$slots,"default",{modelValue:e(l)})]),_:3},8,["dir","data-orientation","as-child","as"]))}}),Ht=Nt;function ze(o,t){return`${o}-trigger-${t}`}function Ke(o,t){return`${o}-content-${t}`}var Gt=T({__name:"TabsContent",props:{value:{type:[String,Number],required:!0},forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const t=o,{forwardRef:a}=j(),n=Oe(),r=P(()=>ze(n.baseId,t.value)),c=P(()=>Ke(n.baseId,t.value)),d=P(()=>t.value===n.modelValue.value),i=w(d.value);return X(()=>{requestAnimationFrame(()=>{i.value=!1})}),(l,s)=>(p(),O(e(we),{present:l.forceMount||d.value,"force-mount":""},{default:u(({present:f})=>[m(e(G),{id:c.value,ref:e(a),"as-child":l.asChild,as:l.as,role:"tabpanel","data-state":d.value?"active":"inactive","data-orientation":e(n).orientation.value,"aria-labelledby":r.value,hidden:!f,tabindex:"0",style:Ae({animationDuration:i.value?"0s":void 0})},{default:u(()=>[!e(n).unmountOnHide.value||f?R(l.$slots,"default",{key:0}):B("v-if",!0)]),_:2},1032,["id","as-child","as","data-state","data-orientation","aria-labelledby","hidden","style"])]),_:3},8,["present"]))}}),Jt=Gt,Qt=T({__name:"TabsList",props:{loop:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const t=o,{loop:a}=ue(t),{forwardRef:n,currentElement:r}=j(),c=Oe();return c.tabsList=r,(d,i)=>(p(),O(e(Vt),{"as-child":"",orientation:e(c).orientation.value,dir:e(c).dir.value,loop:e(a)},{default:u(()=>[m(e(G),{ref:e(n),role:"tablist","as-child":d.asChild,as:d.as,"aria-orientation":e(c).orientation.value},{default:u(()=>[R(d.$slots,"default")]),_:3},8,["as-child","as","aria-orientation"])]),_:3},8,["orientation","dir","loop"]))}}),Yt=Qt,Zt=T({__name:"TabsTrigger",props:{value:{type:[String,Number],required:!0},disabled:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(o){const t=o,{forwardRef:a}=j(),n=Oe(),r=P(()=>ze(n.baseId,t.value)),c=P(()=>Ke(n.baseId,t.value)),d=P(()=>t.value===n.modelValue.value);return(i,l)=>(p(),O(e(zt),{"as-child":"",focusable:!i.disabled,active:d.value},{default:u(()=>[m(e(G),{id:r.value,ref:e(a),role:"tab",type:i.as==="button"?"button":void 0,as:i.as,"as-child":i.asChild,"aria-selected":d.value?"true":"false","aria-controls":c.value,"data-state":d.value?"active":"inactive",disabled:i.disabled,"data-disabled":i.disabled?"":void 0,"data-orientation":e(n).orientation.value,onMousedown:l[0]||(l[0]=Qe(s=>{!i.disabled&&s.ctrlKey===!1?e(n).changeModelValue(i.value):s.preventDefault()},["left"])),onKeydown:l[1]||(l[1]=Je(s=>e(n).changeModelValue(i.value),["enter","space"])),onFocus:l[2]||(l[2]=()=>{const s=e(n).activationMode!=="manual";!d.value&&!i.disabled&&s&&e(n).changeModelValue(i.value)})},{default:u(()=>[R(i.$slots,"default")]),_:3},8,["id","type","as","as-child","aria-selected","aria-controls","data-state","disabled","data-disabled","data-orientation"])]),_:3},8,["focusable","active"]))}}),Wt=Zt;/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=oe("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=oe("flip-horizontal",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3",key:"1i73f7"}],["path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3",key:"saxlbk"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 14v2",key:"8jcxud"}],["path",{d:"M12 8v2",key:"1woqiv"}],["path",{d:"M12 2v2",key:"tus03m"}]]);/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=oe("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=oe("zap-off",[["path",{d:"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317",key:"193nxd"}],["path",{d:"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773",key:"27a7lr"}],["path",{d:"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643",key:"1e0qe9"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=oe("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function _e(o){const t=new Blob([o.image],{type:o.imageType}),a=new Blob([o.thumbnail],{type:o.imageType});return{id:o.id.value,imageUrl:URL.createObjectURL(t),thumbnailUrl:URL.createObjectURL(a),imageType:o.imageType}}const De=Ye("businessCard",()=>{const o=Z(W.ScanBusinessCardUseCase),t=Z(W.GetAllCardsUseCase),a=Z(W.UpdateCardUseCase),n=Z(W.DeleteCardUseCase),r=Z(W.DeleteMultipleCardsUseCase),c=Z(W.RescanCardUseCase),d=Z(W.CardImageRepository),i=w([]),l=w(!1),s=w(null),f=w(new Set),k=P(()=>i.value.length),I=P(()=>f.value.size),x=P(()=>i.value.length>0);async function F(){l.value=!0,s.value=null;try{const h=await t.execute();h.success?i.value=h.cards:s.value=h.error||"Failed to load cards"}catch(h){s.value="Failed to load cards",console.error("Load cards error:",h)}finally{l.value=!1}}async function U(h,C){l.value=!0,s.value=null;try{const v=await o.execute({imageFile:h,onProgress:C});if(v.success&&v.card)await F();else throw s.value=v.error||"Failed to scan card",new Error(s.value)}catch(v){throw s.value="Failed to scan card",console.error("Scan card error:",v),v}finally{l.value=!1}}async function $(h,C,v){await U(v)}async function M(h,C){l.value=!0,s.value=null;try{const v=await a.execute({cardId:h,updates:C});if(v.success)await F();else throw s.value=v.error||"Failed to update card",new Error(s.value)}catch(v){throw s.value="Failed to update card",console.error("Update card error:",v),v}finally{l.value=!1}}async function q(h,C){l.value=!0,s.value=null;try{const v=await c.execute({cardId:h,onProgress:C});if(v.success&&v.card)return await F(),{name:v.card.name,title:v.card.title,company:v.card.company,phone:v.card.phone,email:v.card.email,address:v.card.address,website:v.card.website,socialMedia:v.card.socialMedia,fax:v.card.fax};throw s.value=v.error||"Failed to rescan card",new Error(s.value)}catch(v){throw s.value="Failed to rescan card",console.error("Rescan card error:",v),v}finally{l.value=!1}}async function A(h){l.value=!0,s.value=null;try{const C=await n.execute({cardId:h});if(C.success)f.value.delete(h),await F();else throw s.value=C.error||"Failed to delete card",new Error(s.value)}catch(C){throw s.value="Failed to delete card",console.error("Delete card error:",C),C}finally{l.value=!1}}async function z(h){l.value=!0,s.value=null;try{const C=await r.execute({cardIds:h});if(C.success)h.forEach(v=>f.value.delete(v)),await F();else throw s.value=C.error||"Failed to delete cards",new Error(s.value)}catch(C){throw s.value="Failed to delete cards",console.error("Delete cards error:",C),C}finally{l.value=!1}}async function J(h){try{const C=pe.from(h),v=await d.findById(C);return v?_e(v):void 0}catch(C){console.error("Failed to get card image:",C);return}}async function Q(h){try{const C=pe.from(h),v=await d.findById(C);return v?_e(v).thumbnailUrl:null}catch(C){return console.error("Failed to get thumbnail URL:",C),null}}async function Y(h){try{const C=pe.from(h),v=await d.findById(C);return v?_e(v).imageUrl:null}catch(C){return console.error("Failed to get image URL:",C),null}}function N(h){if(!h.trim())return i.value;const C=h.toLowerCase();return i.value.filter(v=>[v.name,v.company,v.email,v.phone,v.title,v.address].filter(Boolean).join(" ").toLowerCase().includes(C))}function g(h,C){const v=[...h];switch(C){case"date":return v.sort((L,ae)=>ae.timestamp-L.timestamp);case"name":return v.sort((L,ae)=>{const ce=L.name||"",fe=ae.name||"";return ce.localeCompare(fe)});case"company":return v.sort((L,ae)=>{const ce=L.company||"",fe=ae.company||"";return ce.localeCompare(fe)});default:return v}}function D(h){f.value.has(h)?f.value.delete(h):f.value.add(h)}function b(){i.value.forEach(h=>f.value.add(h.id))}function H(){f.value.clear()}function Ne(h){const C=h?i.value.filter(L=>h.includes(L.id)):i.value,v={exportDate:new Date().toISOString(),cardCount:C.length,cards:C.map(L=>({...L,imageId:L.imageId}))};return JSON.stringify(v,null,2)}async function He(){const{getStorageEstimate:h}=await Ze(async()=>{const{getStorageEstimate:C}=await import("./db-setup-CEBhzmfn.js");return{getStorageEstimate:C}},[]);return await h()}return{cards:i,isLoading:l,error:s,selectedCardIds:f,cardCount:k,selectedCount:I,hasCards:x,loadCards:F,scanCard:U,addCard:$,updateCard:M,rescanCard:q,deleteCard:A,deleteCards:z,getCardImage:J,getCardThumbnailUrl:Q,getCardImageUrl:Y,searchCards:N,sortCards:g,toggleCardSelection:D,selectAll:b,clearSelection:H,exportToJson:Ne,getStorageInfo:He}});function sa(o){return["image/jpeg","image/png","image/webp"].includes(o.type)}function oa(o){return URL.createObjectURL(o)}function Re(o){URL.revokeObjectURL(o)}const na=T({__name:"Tabs",props:{defaultValue:{},orientation:{},dir:{},activationMode:{},modelValue:{},unmountOnHide:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["update:modelValue"],setup(o,{emit:t}){const r=Ie(o,t);return(c,d)=>(p(),O(e(Ht),xe(ke(e(r))),{default:u(()=>[R(c.$slots,"default")]),_:3},16))}}),Be=T({__name:"TabsContent",props:{value:{},forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(o){const t=o,a=de(t,"class");return(n,r)=>(p(),O(e(Jt),V({class:e(se)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t.class)},e(a)),{default:u(()=>[R(n.$slots,"default")]),_:3},16,["class"]))}}),ra=T({__name:"TabsList",props:{loop:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(o){const t=o,a=de(t,"class");return(n,r)=>(p(),O(e(Yt),V(e(a),{class:e(se)("inline-flex items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t.class)}),{default:u(()=>[R(n.$slots,"default")]),_:3},16,["class"]))}}),la={class:"truncate"},Me=T({__name:"TabsTrigger",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(o){const t=o,a=de(t,"class"),n=We(a);return(r,c)=>(p(),O(e(Wt),V(e(n),{class:e(se)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t.class)}),{default:u(()=>[_("span",la,[R(r.$slots,"default")])]),_:3},16,["class"]))}}),Ue=T({__name:"Input",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(o,{emit:t}){const a=o,r=Xe(a,"modelValue",t,{passive:!0,defaultValue:a.defaultValue});return(c,d)=>Se((p(),S("input",{"onUpdate:modelValue":d[0]||(d[0]=i=>tt(r)?r.value=i:null),class:Le(e(se)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a.class))},null,2)),[[et,e(r)]])}}),ia={key:0,class:"text-sm text-muted-foreground"},ua=["src"],da={key:2,class:"text-sm text-muted-foreground"},ca=T({__name:"CardThumbnail",props:{imageId:{}},emits:["click"],setup(o,{emit:t}){const a=o,n=t,r=De(),c=w(null),d=w(!0);return X(async()=>{try{c.value=await r.getCardThumbnailUrl(a.imageId)}catch(i){console.error("Failed to load thumbnail:",i)}finally{d.value=!1}}),te(()=>{c.value&&URL.revokeObjectURL(c.value)}),(i,l)=>(p(),S("div",{class:"w-full h-32 bg-muted rounded-md overflow-hidden flex items-center justify-center cursor-pointer hover:opacity-80 transition-opacity",onClick:l[0]||(l[0]=s=>n("click"))},[d.value?(p(),S("div",ia,"Loading...")):c.value?(p(),S("img",{key:1,src:c.value,alt:"Card thumbnail",class:"w-full h-full object-cover"},null,8,ua)):(p(),S("div",da,"No image"))]))}});function fa(){const o=w(null),t=w(null),a=w(!1),n=w("environment"),r=w({}),c=()=>!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia);async function d(I="environment"){if(!c())return t.value="Camera API not supported",!1;try{n.value=I;const x={video:{facingMode:{ideal:I},width:{ideal:1920},height:{ideal:1080}},audio:!1};o.value=await navigator.mediaDevices.getUserMedia(x),a.value=!0,t.value=null;const F=o.value.getVideoTracks()[0];if(F){const U=F.getCapabilities();r.value={torch:U.torch!==void 0,zoom:U.zoom!==void 0,focusMode:U.focusMode||[]}}return!0}catch(x){return console.error("Camera access error:",x),x instanceof Error&&(x.name==="NotAllowedError"?t.value="Camera permission denied":x.name==="NotFoundError"?t.value="No camera found":t.value="Camera access failed"),!1}}function i(){o.value&&(o.value.getTracks().forEach(I=>I.stop()),o.value=null,a.value=!1)}async function l(I){if(!o.value||!r.value.torch)return!1;try{const x=o.value.getVideoTracks()[0];return x?(await x.applyConstraints({advanced:[{torch:I}]}),!0):!1}catch(x){return console.error("Torch toggle error:",x),!1}}async function s(I){if(!o.value)return!1;try{const x=o.value.getVideoTracks()[0];return x?(await x.applyConstraints({advanced:[{focusMode:I}]}),!0):!1}catch(x){return console.error("Focus mode error:",x),!1}}async function f(){const I=n.value==="user"?"environment":"user";return i(),await d(I)}function k(I){if(!o.value||!a.value)return null;try{const x=document.createElement("canvas");x.width=I.videoWidth,x.height=I.videoHeight;const F=x.getContext("2d");return F?(n.value==="user"&&(F.translate(x.width,0),F.scale(-1,1)),F.drawImage(I,0,0),new Promise(U=>{x.toBlob($=>{U($)},"image/jpeg",.9)})):null}catch(x){return console.error("Capture image error:",x),null}}return te(()=>{i()}),{stream:o,error:t,isActive:a,facingMode:n,capabilities:r,isSupported:c,startCamera:d,stopCamera:i,toggleTorch:l,setFocusMode:s,switchCamera:f,captureImage:k}}const pa={key:0,class:"p-8 text-center"},va={class:"text-muted-foreground mb-4"},ma={class:"text-sm text-muted-foreground"},ga={key:1,class:"p-8 text-center"},_a={class:"text-destructive mb-4"},ya={class:"text-sm text-muted-foreground"},ba={key:2,class:"relative aspect-video bg-black overflow-hidden"},ha=["src"],Ca={key:1,class:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent"},wa={class:"flex items-center justify-center gap-4"},xa={key:2,class:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent"},ka={class:"flex items-center justify-center gap-4"},Ia=T({__name:"CameraCapture",emits:["captured"],setup(o,{emit:t}){const{t:a}=Pe(),n=t,{stream:r,error:c,isActive:d,facingMode:i,capabilities:l,isSupported:s,startCamera:f,stopCamera:k,toggleTorch:I,switchCamera:x,captureImage:F}=fa(),U=w(null),$=w(null),M=w(!1),q=w(!1),A=w(!1);te(()=>{$.value&&URL.revokeObjectURL($.value),k()}),ye(r,g=>{g&&U.value&&(U.value.srcObject=g)},{immediate:!0});async function z(){await I(!M.value)&&(M.value=!M.value)}async function J(){await x()}async function Q(){if(!A.value&&!d.value)if(await f("environment"))A.value=!0,await new Promise(b=>setTimeout(b,500));else return;if(!U.value)return;q.value=!0;const g=await F(U.value);q.value=!1,g&&($.value&&URL.revokeObjectURL($.value),$.value=URL.createObjectURL(g),k())}function Y(){$.value&&fetch($.value).then(g=>g.blob()).then(g=>{n("captured",g),N()})}async function N(){$.value&&(URL.revokeObjectURL($.value),$.value=null),await f(i.value)}return(g,D)=>(p(),O(e(re),null,{default:u(()=>[m(e(ne),{class:"p-0"},{default:u(()=>[e(s)()?e(c)?(p(),S("div",ga,[_("p",_a,y(e(c)),1),_("p",ya,y(e(a)("businessCardScanner.camera.permissionInstructions")),1)])):(p(),S("div",ba,[Se(_("video",{ref_key:"videoRef",ref:U,autoplay:"",playsinline:"",class:Le(["w-full h-full object-cover",e(i)==="user"?"scale-x-[-1]":""])},null,2),[[at,!$.value&&e(d)]]),$.value?(p(),S("img",{key:0,src:$.value,alt:"Captured business card",class:"w-full h-full object-contain"},null,8,ha)):B("",!0),!$.value&&e(d)?(p(),S("div",Ca,[_("div",wa,[e(l).torch?(p(),O(e(K),{key:0,variant:"ghost",size:"icon",class:"h-12 w-12 rounded-full bg-white/10 hover:bg-white/20 text-white",onClick:z},{default:u(()=>[M.value?(p(),O(e(aa),{key:0,size:24})):(p(),O(e(ta),{key:1,size:24}))]),_:1})):B("",!0),m(e(K),{size:"icon",class:"h-16 w-16 rounded-full bg-white hover:bg-white/90",disabled:q.value,onClick:Q},{default:u(()=>[m(e(Xt),{size:28,class:"text-black"})]),_:1},8,["disabled"]),m(e(K),{variant:"ghost",size:"icon",class:"h-12 w-12 rounded-full bg-white/10 hover:bg-white/20 text-white",onClick:J},{default:u(()=>[m(e(ea),{size:24})]),_:1})])])):B("",!0),$.value?(p(),S("div",xa,[_("div",ka,[m(e(K),{variant:"ghost",size:"icon",class:"h-12 w-12 rounded-full bg-white/10 hover:bg-white/20 text-white",onClick:N},{default:u(()=>[m(e(Te),{size:24})]),_:1}),m(e(K),{size:"lg",class:"px-8 rounded-full bg-white hover:bg-white/90 text-black",onClick:Y},{default:u(()=>[m(e(pt),{size:20,class:"mr-2"}),E(" "+y(e(a)("businessCardScanner.camera.useThisImage")),1)]),_:1})])])):B("",!0)])):(p(),S("div",pa,[_("p",va,y(e(a)("businessCardScanner.camera.notSupported")),1),_("p",ma,y(e(a)("businessCardScanner.camera.useUploadInstead")),1)]))]),_:1})]),_:1}))}}),Sa=T({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(o,{emit:t}){const r=Ie(o,t);return(c,d)=>(p(),O(e(gt),xe(ke(e(r))),{default:u(()=>[R(c.$slots,"default")]),_:3},16))}}),Oa=T({__name:"DialogContent",props:{forceMount:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:t}){const a=o,n=t,r=de(a,"class"),c=Ie(r,n);return(d,i)=>(p(),O(e($t),null,{default:u(()=>[m(e(Dt),{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),m(e(It),V(e(c),{class:e(se)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a.class)}),{default:u(()=>[R(d.$slots,"default"),m(e(yt),{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground"},{default:u(()=>[m(e(Te),{class:"w-4 h-4"}),i[0]||(i[0]=_("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}}),Ta={class:"absolute top-4 right-4 z-10"},Da={class:"relative w-full min-h-[400px] max-h-[80vh] bg-black flex items-center justify-center"},Fa={key:0,class:"text-white"},$a=["src"],Ra={key:2,class:"text-white"},Ba=T({__name:"ImageViewer",props:{imageId:{},open:{type:Boolean}},emits:["update:open"],setup(o,{emit:t}){const a=o,n=t,r=De(),c=w(null),d=w(!1);ye([()=>a.imageId,()=>a.open],async([s,f])=>{if(s&&f){d.value=!0;try{c.value=await r.getCardImageUrl(s)}catch(k){console.error("Failed to load full-size image:",k)}finally{d.value=!1}}},{immediate:!0}),ye(()=>a.open,s=>{!s&&c.value&&(URL.revokeObjectURL(c.value),c.value=null)}),te(()=>{c.value&&URL.revokeObjectURL(c.value)});function i(){n("update:open",!1)}function l(s){s.key==="Escape"&&a.open&&i()}return X(()=>{document.addEventListener("keydown",l)}),te(()=>{document.removeEventListener("keydown",l)}),(s,f)=>(p(),O(e(Sa),{open:o.open,"onUpdate:open":i},{default:u(()=>[m(e(Oa),{class:"max-w-4xl w-full p-0"},{default:u(()=>[_("div",Ta,[m(e(K),{variant:"ghost",size:"icon",class:"rounded-full bg-black/50 hover:bg-black/70 text-white",onClick:i},{default:u(()=>[m(e(Te),{size:20})]),_:1})]),_("div",Da,[d.value?(p(),S("div",Fa,"Loading...")):c.value?(p(),S("img",{key:1,src:c.value,alt:"Full-size business card",class:"max-w-full max-h-[80vh] object-contain"},null,8,$a)):(p(),S("div",Ra,"No image available"))])]),_:1})]),_:1},8,["open"]))}}),Ma={class:"min-h-screen p-4 bg-gradient-to-b from-background to-muted/20"},Ua={class:"container mx-auto max-w-7xl space-y-6"},qa={class:"text-center"},Ea={class:"text-3xl md:text-4xl font-bold mb-2"},Aa={class:"text-lg text-muted-foreground"},La={class:"flex gap-4"},Pa={key:0,class:"border rounded-lg p-4"},Va=["src"],ja={key:0,class:"space-y-2 mt-4"},za={class:"text-sm text-muted-foreground"},Ka={class:"w-full bg-secondary rounded-full h-2"},Na={class:"text-xs text-center"},Ha={key:1,class:"border-t pt-4 mt-4"},Ga={class:"flex justify-between items-center"},Ja={key:0,class:"flex gap-4 mb-4"},Qa={value:"date"},Ya={value:"name"},Za={value:"company"},Wa={key:1,class:"text-center py-12"},Xa={class:"text-muted-foreground mb-2"},es={class:"text-sm text-muted-foreground"},ts={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},as={class:"space-y-1 text-sm"},ss={key:0,class:"flex items-start gap-2"},os={class:"text-muted-foreground min-w-[60px]"},ns={class:"flex-1"},rs={key:1,class:"flex items-start gap-2"},ls={class:"text-muted-foreground min-w-[60px]"},is={class:"flex-1"},us={key:2,class:"flex items-start gap-2"},ds={class:"text-muted-foreground min-w-[60px]"},cs={class:"flex-1 break-all"},fs={key:3,class:"flex items-start gap-2"},ps={class:"text-muted-foreground min-w-[60px]"},vs={class:"flex-1 break-all"},ms={key:4,class:"flex items-start gap-2"},gs={class:"text-muted-foreground min-w-[60px]"},_s={class:"flex-1"},ys={key:5,class:"flex items-start gap-2"},bs={class:"text-muted-foreground min-w-[60px]"},hs={class:"flex-1 break-all"},Cs={key:6,class:"flex items-start gap-2"},ws={class:"text-muted-foreground min-w-[60px]"},xs={class:"flex-1"},ks={key:0,class:"pt-2 border-t"},Is={class:"text-xs text-muted-foreground mb-1"},Ss={class:"bg-muted/50 rounded p-2 text-xs font-mono whitespace-pre-wrap break-words max-h-24 overflow-y-auto"},Os={class:"flex items-center justify-between pt-2 border-t"},Ts={class:"flex gap-2"},Ds={key:0},Fs={key:1},Ls=T({__name:"BusinessCardScannerView",setup(o){const{t}=Pe(),a=De(),n=w("camera"),r=w(!1),c=w(0),d=w(null),i=w(null),l=w(null),s=w(""),f=w("date"),k=w(!1),I=w(null),x=w(null),F=w(0);X(()=>{const g=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);n.value=g?"camera":"upload"});const U=P(()=>{const g=a.searchCards(s.value);return a.sortCards(g,f.value)});X(async()=>{await a.loadCards()});async function $(g){const b=g.target.files?.[0];if(b){if(!sa(b)){d.value=t("businessCardScanner.invalidFileType");return}await q(b)}}async function M(g){await q(g)}async function q(g){r.value=!0,d.value=null,c.value=0;try{i.value=g,l.value&&Re(l.value),l.value=oa(g),await a.scanCard(g,D=>{c.value=Math.round(D)}),A(),alert(t("businessCardScanner.messages.cardSaved"))}catch(D){console.error("OCR processing error:",D),d.value=a.error||t("businessCardScanner.scanError")}finally{r.value=!1}}function A(){i.value=null,l.value&&(Re(l.value),l.value=null),d.value=null,c.value=0}async function z(g){if(confirm(t("businessCardScanner.confirm.deleteMessage")))try{await a.deleteCard(g),alert(t("businessCardScanner.messages.cardDeleted"))}catch(D){console.error("Delete card error:",D),d.value=t("businessCardScanner.messages.deleteFailed")}}function J(){try{const g=a.exportToJson(),D=new Blob([g],{type:"application/json"}),b=URL.createObjectURL(D),H=document.createElement("a");H.href=b,H.download=`business-cards-${new Date().toISOString().split("T")[0]}.json`,H.click(),URL.revokeObjectURL(b),alert(t("businessCardScanner.export.downloadSuccess"))}catch(g){console.error("Export error:",g),d.value=t("businessCardScanner.export.exportError")}}function Q(g){return new Date(g).toLocaleDateString()}function Y(g){I.value=g,k.value=!0}async function N(g){if(confirm(t("businessCardScanner.confirm.rescanMessage"))){x.value=g,F.value=0,d.value=null;try{await a.rescanCard(g,D=>{F.value=Math.round(D)}),alert(t("businessCardScanner.messages.rescanSuccess"))}catch(D){console.error("Rescan error:",D),d.value=t("businessCardScanner.messages.rescanFailed")}finally{x.value=null,F.value=0}}}return(g,D)=>(p(),S("main",Ma,[_("div",Ua,[_("div",qa,[_("h1",Ea,y(e(t)("businessCardScanner.title")),1),_("p",Aa,y(e(t)("businessCardScanner.subtitle")),1)]),d.value?(p(),O(e($e),{key:0,variant:"destructive",class:"mb-4"},{default:u(()=>[m(e(Fe),null,{default:u(()=>[E(y(d.value),1)]),_:1})]),_:1})):B("",!0),m(e(re),null,{default:u(()=>[m(e(ve),null,{default:u(()=>[m(e(me),null,{default:u(()=>[E(y(e(t)("businessCardScanner.capture.title")),1)]),_:1}),m(e(ge),null,{default:u(()=>[E(y(e(t)("businessCardScanner.capture.description")),1)]),_:1})]),_:1}),m(e(ne),null,{default:u(()=>[m(e(na),{modelValue:n.value,"onUpdate:modelValue":D[0]||(D[0]=b=>n.value=b),class:"w-full"},{default:u(()=>[m(e(ra),{class:"grid w-full grid-cols-2 mb-4"},{default:u(()=>[m(e(Me),{value:"camera"},{default:u(()=>[E(y(e(t)("businessCardScanner.tabs.camera")),1)]),_:1}),m(e(Me),{value:"upload"},{default:u(()=>[E(y(e(t)("businessCardScanner.tabs.upload")),1)]),_:1})]),_:1}),m(e(Be),{value:"camera",class:"space-y-4"},{default:u(()=>[m(Ia,{onCaptured:M})]),_:1}),m(e(Be),{value:"upload",class:"space-y-4"},{default:u(()=>[_("div",La,[m(e(Ue),{type:"file",accept:"image/jpeg,image/png,image/webp",onChange:$,disabled:r.value},null,8,["disabled"])]),l.value?(p(),S("div",Pa,[_("img",{src:l.value,alt:"Card preview",class:"max-w-full h-auto max-h-64 mx-auto"},null,8,Va)])):B("",!0)]),_:1})]),_:1},8,["modelValue"]),r.value?(p(),S("div",ja,[_("p",za,y(e(t)("businessCardScanner.scanning")),1),_("div",Ka,[_("div",{class:"bg-primary h-2 rounded-full transition-all",style:Ae({width:`${c.value}%`})},null,4)]),_("p",Na,y(c.value)+"%",1)])):B("",!0),!r.value&&i.value?(p(),S("div",Ha,[m(e($e),null,{default:u(()=>[m(e(Fe),null,{default:u(()=>[E(y(e(t)("businessCardScanner.messages.scanSuccess"))+" ",1),m(e(K),{onClick:A,variant:"link",class:"ml-2"},{default:u(()=>[E(y(e(t)("businessCardScanner.actions.scanAnother")),1)]),_:1})]),_:1})]),_:1})])):B("",!0)]),_:1})]),_:1}),m(e(re),null,{default:u(()=>[m(e(ve),null,{default:u(()=>[_("div",Ga,[_("div",null,[m(e(me),null,{default:u(()=>[E(y(e(t)("businessCardScanner.list.title")),1)]),_:1}),m(e(ge),null,{default:u(()=>[E(y(e(t)("businessCardScanner.list.count",{count:e(a).cardCount})),1)]),_:1})]),e(a).hasCards?(p(),O(e(K),{key:0,onClick:J,variant:"outline"},{default:u(()=>[E(y(e(t)("businessCardScanner.actions.exportAll")),1)]),_:1})):B("",!0)])]),_:1}),m(e(ne),null,{default:u(()=>[e(a).hasCards?(p(),S("div",Ja,[m(e(Ue),{modelValue:s.value,"onUpdate:modelValue":D[1]||(D[1]=b=>s.value=b),placeholder:e(t)("businessCardScanner.list.search"),class:"flex-1"},null,8,["modelValue","placeholder"]),Se(_("select",{"onUpdate:modelValue":D[2]||(D[2]=b=>f.value=b),class:"border rounded-md px-3 py-2"},[_("option",Qa,y(e(t)("businessCardScanner.list.sortDate")),1),_("option",Ya,y(e(t)("businessCardScanner.list.sortName")),1),_("option",Za,y(e(t)("businessCardScanner.list.sortCompany")),1)],512),[[st,f.value]])])):B("",!0),e(a).hasCards?(p(),S("div",ts,[(p(!0),S(ot,null,nt(U.value,b=>(p(),O(e(re),{key:b.id,class:"hover:shadow-lg transition-shadow"},{default:u(()=>[m(e(ve),null,{default:u(()=>[m(ca,{"image-id":b.imageId,onClick:H=>Y(b.imageId)},null,8,["image-id","onClick"])]),_:2},1024),m(e(ne),{class:"space-y-2"},{default:u(()=>[m(e(me),{class:"text-lg"},{default:u(()=>[E(y(b.name||"Unknown"),1)]),_:2},1024),m(e(ge),null,{default:u(()=>[E(y(b.title),1)]),_:2},1024),_("div",as,[b.company?(p(),S("p",ss,[_("span",os,y(e(t)("businessCardScanner.fields.company"))+":",1),_("span",ns,y(b.company),1)])):B("",!0),b.phone?(p(),S("p",rs,[_("span",ls,y(e(t)("businessCardScanner.fields.phone"))+":",1),_("span",is,y(b.phone),1)])):B("",!0),b.email?(p(),S("p",us,[_("span",ds,y(e(t)("businessCardScanner.fields.email"))+":",1),_("span",cs,y(b.email),1)])):B("",!0),b.website?(p(),S("p",fs,[_("span",ps,y(e(t)("businessCardScanner.fields.website"))+":",1),_("span",vs,y(b.website),1)])):B("",!0),b.fax?(p(),S("p",ms,[_("span",gs,y(e(t)("businessCardScanner.fields.fax"))+":",1),_("span",_s,y(b.fax),1)])):B("",!0),b.socialMedia?(p(),S("p",ys,[_("span",bs,y(e(t)("businessCardScanner.fields.socialMedia"))+":",1),_("span",hs,y(b.socialMedia),1)])):B("",!0),b.address?(p(),S("p",Cs,[_("span",ws,y(e(t)("businessCardScanner.fields.address"))+":",1),_("span",xs,y(b.address),1)])):B("",!0)]),b.rawOcr?(p(),S("div",ks,[_("p",Is,y(e(t)("businessCardScanner.fields.rawOcr"))+":",1),_("div",Ss,y(b.rawOcr),1)])):B("",!0),_("div",Os,[m(e(rt),{variant:"secondary"},{default:u(()=>[E(y(Q(b.timestamp)),1)]),_:2},1024),_("div",Ts,[m(e(K),{onClick:H=>N(b.id),variant:"outline",size:"sm",disabled:x.value===b.id},{default:u(()=>[x.value===b.id?(p(),S("span",Ds,y(e(t)("businessCardScanner.actions.rescanning"))+" "+y(F.value)+"% ",1)):(p(),S("span",Fs,y(e(t)("businessCardScanner.actions.rescan")),1))]),_:2},1032,["onClick","disabled"]),m(e(K),{onClick:H=>z(b.id),variant:"ghost",size:"sm"},{default:u(()=>[E(y(e(t)("businessCardScanner.actions.delete")),1)]),_:1},8,["onClick"])])])]),_:2},1024)]),_:2},1024))),128))])):(p(),S("div",Wa,[_("p",Xa,y(e(t)("businessCardScanner.list.empty")),1),_("p",es,y(e(t)("businessCardScanner.list.emptyMessage")),1)]))]),_:1})]),_:1})]),m(Ba,{"image-id":I.value,open:k.value,"onUpdate:open":D[3]||(D[3]=b=>k.value=b)},null,8,["image-id","open"])]))}});export{Ls as default};
