import{L as n}from"./Language-DnjUx8Bb.js";import{L as i}from"./Locale-BIjsJczs.js";import{R as s}from"./Result-BKWviScr.js";import"./Entity-DpinO5cs.js";import"./Identifier-Yjt1Lx6E.js";import"./ValueObject-DRESENkS.js";class d{constructor(t,e){this.languageRepository=t,this.i18nAdapter=e}async execute(t){const e=i.create(t);if(e.isFailure)return s.fail(e.error);const o=e.value,a=(await this.languageRepository.get()).changeTo(o);return await this.languageRepository.save(a),this.i18nAdapter.setLocale(o),s.ok(a)}async toggle(){const e=(await this.languageRepository.get()).toggle();return await this.languageRepository.save(e),this.i18nAdapter.setLocale(e.currentLocale),s.ok(e)}async initialize(){const e=await this.languageRepository.getSavedLocale()||this.i18nAdapter.getCurrentLocale()||i.english(),o=n.create({currentLocale:e});if(o.isFailure){const a=n.default();return await this.languageRepository.save(a),this.i18nAdapter.setLocale(a.currentLocale),a}const r=o.value;return await this.languageRepository.save(r),this.i18nAdapter.setLocale(r.currentLocale),r}}export{d as ChangeLanguageUseCase};
