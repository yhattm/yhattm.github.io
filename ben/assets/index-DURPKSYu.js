import{a as r,T as h}from"./Theme-ClpGNSWu.js";import{R as m}from"./Result-BKWviScr.js";import"./Entity-DpinO5cs.js";import"./Identifier-Yjt1Lx6E.js";import"./ValueObject-DRESENkS.js";class y{constructor(t,e){this.themeRepository=t,this.themeApplier=e}async execute(t){const e=r.create(t);if(e.isFailure)return m.fail(e.error);const i=e.value,s=(await this.themeRepository.get()).changeMode(i);return await this.themeRepository.save(s),this.themeApplier.apply(s),m.ok(s)}async initialize(t){const i=await this.themeRepository.getSavedMode()||r.system(),a=h.create({mode:i,systemPrefersDark:t});if(a.isFailure){const o=h.default();return await this.themeRepository.save(o),this.themeApplier.apply(o),o}const s=a.value;return await this.themeRepository.save(s),this.themeApplier.apply(s),s}async updateSystemPreference(t){const e=await this.themeRepository.get(),i=e.updateSystemPreference(t);await this.themeRepository.save(i),e.mode.isSystem&&this.themeApplier.apply(i)}}export{y as ChangeThemeUseCase};
