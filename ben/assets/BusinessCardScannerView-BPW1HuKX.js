import{d as W,Z as bt,k as q,Y as Be,M as wt,y as Z,g as r,N as de,p as K,o as S,w as h,z as ce,P as he,a9 as Me,m as be,L as De,f as b,ab as _t,a7 as Ct,E as X,A as St,B as kt,a0 as ca,$ as da,c as ie,n as Se,a4 as Ra,q as fa,ac as xa,a2 as Ta,j as Ea,ad as Fe,_ as Ma,a6 as It,C as Pe,D as Ie,a1 as Da,e as C,ae as Aa,af as Ae,ag as pa,b as j,s as ma,ah as Ba,u as va,v as pt,t as I,ai as Pa,h as Y,aj as $a,F as qa,r as Fa}from"./index-BvALl33A.js";import{d as Te,_ as Ee,a as Ue,b as Ve,c as je}from"./CardTitle.vue_vue_type_script_setup_true_lang-CriwxP58.js";import{_ as ue}from"./index-DDXDnrUS.js";import{_ as me}from"./Label.vue_vue_type_script_setup_true_lang-BsGSZZKN.js";import{_ as Ua,a as Va}from"./index-C01D-tLc.js";import{_ as ja}from"./index-D1Q4hGeU.js";import{D as Na,g as za,F as Ka,a as Ga,u as Wa,T as Ha,c as Oe,C as Ya}from"./check-DUYYdk9O.js";const[we,Ja]=wt("DialogRoot");var Za=W({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:e}){const a=t,o=bt(a,"open",e,{defaultValue:a.defaultOpen,passive:a.open===void 0}),s=q(),i=q(),{modal:u}=Be(a);return Ja({open:o,modal:u,openModal:()=>{o.value=!0},onOpenChange:d=>{o.value=d},onOpenToggle:()=>{o.value=!o.value},contentId:"",titleId:"",descriptionId:"",triggerElement:s,contentElement:i}),(d,l)=>Z(d.$slots,"default",{open:r(o),close:()=>o.value=!1})}}),Qa=Za,Xa=W({__name:"DialogClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const e=t;de();const a=we();return(n,o)=>(S(),K(r(he),ce(e,{type:n.as==="button"?"button":void 0,onClick:o[0]||(o[0]=s=>r(a).onOpenChange(!1))}),{default:h(()=>[Z(n.$slots,"default")]),_:3},16,["type"]))}}),er=Xa,tr=W({__name:"DialogContentImpl",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const a=t,n=e,o=we(),{forwardRef:s,currentElement:i}=de();return o.titleId||=Me(void 0,"reka-dialog-title"),o.descriptionId||=Me(void 0,"reka-dialog-description"),be(()=>{o.contentElement=i,De()!==document.body&&(o.triggerElement.value=De())}),(u,d)=>(S(),K(r(Ka),{"as-child":"",loop:"",trapped:a.trapFocus,onMountAutoFocus:d[5]||(d[5]=l=>n("openAutoFocus",l)),onUnmountAutoFocus:d[6]||(d[6]=l=>n("closeAutoFocus",l))},{default:h(()=>[b(r(Na),ce({id:r(o).contentId,ref:r(s),as:u.as,"as-child":u.asChild,"disable-outside-pointer-events":u.disableOutsidePointerEvents,role:"dialog","aria-describedby":r(o).descriptionId,"aria-labelledby":r(o).titleId,"data-state":r(za)(r(o).open.value)},u.$attrs,{onDismiss:d[0]||(d[0]=l=>r(o).onOpenChange(!1)),onEscapeKeyDown:d[1]||(d[1]=l=>n("escapeKeyDown",l)),onFocusOutside:d[2]||(d[2]=l=>n("focusOutside",l)),onInteractOutside:d[3]||(d[3]=l=>n("interactOutside",l)),onPointerDownOutside:d[4]||(d[4]=l=>n("pointerDownOutside",l))}),{default:h(()=>[Z(u.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),ga=tr,ar=W({__name:"DialogContentModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const a=t,n=e,o=we(),s=_t(n),{forwardRef:i,currentElement:u}=de();return Ga(u),(d,l)=>(S(),K(ga,ce({...a,...r(s)},{ref:r(i),"trap-focus":r(o).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:l[0]||(l[0]=v=>{v.defaultPrevented||(v.preventDefault(),r(o).triggerElement.value?.focus())}),onPointerDownOutside:l[1]||(l[1]=v=>{const k=v.detail.originalEvent,O=k.button===0&&k.ctrlKey===!0;(k.button===2||O)&&v.preventDefault()}),onFocusOutside:l[2]||(l[2]=v=>{v.preventDefault()})}),{default:h(()=>[Z(d.$slots,"default")]),_:3},16,["trap-focus"]))}}),rr=ar,nr=W({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const a=t,o=_t(e);de();const s=we(),i=q(!1),u=q(!1);return(d,l)=>(S(),K(ga,ce({...a,...r(o)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:l[0]||(l[0]=v=>{v.defaultPrevented||(i.value||r(s).triggerElement.value?.focus(),v.preventDefault()),i.value=!1,u.value=!1}),onInteractOutside:l[1]||(l[1]=v=>{v.defaultPrevented||(i.value=!0,v.detail.originalEvent.type==="pointerdown"&&(u.value=!0));const k=v.target;r(s).triggerElement.value?.contains(k)&&v.preventDefault(),v.detail.originalEvent.type==="focusin"&&u.value&&v.preventDefault()})}),{default:h(()=>[Z(d.$slots,"default")]),_:3},16))}}),or=nr,sr=W({__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const a=t,n=e,o=we(),s=_t(n),{forwardRef:i}=de();return(u,d)=>(S(),K(r(Ct),{present:u.forceMount||r(o).open.value},{default:h(()=>[r(o).modal.value?(S(),K(rr,ce({key:0,ref:r(i)},{...a,...r(s),...u.$attrs}),{default:h(()=>[Z(u.$slots,"default")]),_:3},16)):(S(),K(or,ce({key:1,ref:r(i)},{...a,...r(s),...u.$attrs}),{default:h(()=>[Z(u.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),ir=sr,lr=W({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=we();return Wa(!0),de(),(a,n)=>(S(),K(r(he),{as:a.as,"as-child":a.asChild,"data-state":r(e).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:h(()=>[Z(a.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),ur=lr,cr=W({__name:"DialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=we(),{forwardRef:a}=de();return(n,o)=>r(e)?.modal.value?(S(),K(r(Ct),{key:0,present:n.forceMount||r(e).open.value},{default:h(()=>[b(ur,ce(n.$attrs,{ref:r(a),as:n.as,"as-child":n.asChild}),{default:h(()=>[Z(n.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):X("v-if",!0)}}),dr=cr,fr=W({__name:"DialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=t;return(a,n)=>(S(),K(r(Ha),St(kt(e)),{default:h(()=>[Z(a.$slots,"default")]),_:3},16))}}),pr=fr;const mr="rovingFocusGroup.onEntryFocus",vr={bubbles:!1,cancelable:!0},gr={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function hr(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function yr(t,e,a){const n=hr(t.key,a);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return gr[n]}function ha(t,e=!1){const a=De();for(const n of t)if(n===a||(n.focus({preventScroll:e}),De()!==a))return}function br(t,e){return t.map((a,n)=>t[(e+n)%t.length])}const[wr,_r]=wt("RovingFocusGroup");var Cr=W({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(t,{expose:e,emit:a}){const n=t,o=a,{loop:s,orientation:i,dir:u}=Be(n),d=ca(u),l=bt(n,"currentTabStopId",o,{defaultValue:n.defaultCurrentTabStopId,passive:n.currentTabStopId===void 0}),v=q(!1),k=q(!1),O=q(0),{getItems:T,CollectionSlot:G}=da({isProvider:!0});function M(g){const E=!k.value;if(g.currentTarget&&g.target===g.currentTarget&&E&&!v.value){const F=new CustomEvent(mr,vr);if(g.currentTarget.dispatchEvent(F),o("entryFocus",F),!F.defaultPrevented){const L=T().map(w=>w.ref).filter(w=>w.dataset.disabled!==""),N=L.find(w=>w.getAttribute("data-active")===""),H=L.find(w=>w.getAttribute("data-highlighted")===""),ee=L.find(w=>w.id===l.value),R=[N,H,ee,...L].filter(Boolean);ha(R,n.preventScrollOnEntryFocus)}}k.value=!1}function c(){setTimeout(()=>{k.value=!1},1)}return e({getItems:T}),_r({loop:s,dir:d,orientation:i,currentTabStopId:l,onItemFocus:g=>{l.value=g},onItemShiftTab:()=>{v.value=!0},onFocusableItemAdd:()=>{O.value++},onFocusableItemRemove:()=>{O.value--}}),(g,E)=>(S(),K(r(G),null,{default:h(()=>[b(r(he),{tabindex:v.value||O.value===0?-1:0,"data-orientation":r(i),as:g.as,"as-child":g.asChild,dir:r(d),style:{outline:"none"},onMousedown:E[0]||(E[0]=F=>k.value=!0),onMouseup:c,onFocus:M,onBlur:E[1]||(E[1]=F=>v.value=!1)},{default:h(()=>[Z(g.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),Sr=Cr,kr=W({__name:"RovingFocusItem",props:{tabStopId:{type:String,required:!1},focusable:{type:Boolean,required:!1,default:!0},active:{type:Boolean,required:!1},allowShiftKey:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(t){const e=t,a=wr(),n=Me(),o=ie(()=>e.tabStopId||n),s=ie(()=>a.currentTabStopId.value===o.value),{getItems:i,CollectionItem:u}=da();be(()=>{e.focusable&&a.onFocusableItemAdd()}),Se(()=>{e.focusable&&a.onFocusableItemRemove()});function d(l){if(l.key==="Tab"&&l.shiftKey){a.onItemShiftTab();return}if(l.target!==l.currentTarget)return;const v=yr(l,a.orientation.value,a.dir.value);if(v!==void 0){if(l.metaKey||l.ctrlKey||l.altKey||!e.allowShiftKey&&l.shiftKey)return;l.preventDefault();let k=[...i().map(O=>O.ref).filter(O=>O.dataset.disabled!=="")];if(v==="last")k.reverse();else if(v==="prev"||v==="next"){v==="prev"&&k.reverse();const O=k.indexOf(l.currentTarget);k=a.loop.value?br(k,O+1):k.slice(O+1)}Ra(()=>ha(k))}}return(l,v)=>(S(),K(r(u),null,{default:h(()=>[b(r(he),{tabindex:s.value?0:-1,"data-orientation":r(a).orientation.value,"data-active":l.active?"":void 0,"data-disabled":l.focusable?void 0:"",as:l.as,"as-child":l.asChild,onMousedown:v[0]||(v[0]=k=>{l.focusable?r(a).onItemFocus(o.value):k.preventDefault()}),onFocus:v[1]||(v[1]=k=>r(a).onItemFocus(o.value)),onKeydown:d},{default:h(()=>[Z(l.$slots,"default")]),_:3},8,["tabindex","data-orientation","data-active","data-disabled","as","as-child"])]),_:3}))}}),Ir=kr;const[Ot,Or]=wt("TabsRoot");var Lr=W({__name:"TabsRoot",props:{defaultValue:{type:null,required:!1},orientation:{type:String,required:!1,default:"horizontal"},dir:{type:String,required:!1},activationMode:{type:String,required:!1,default:"automatic"},modelValue:{type:null,required:!1},unmountOnHide:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,n=e,{orientation:o,unmountOnHide:s,dir:i}=Be(a),u=ca(i);de();const d=bt(a,"modelValue",n,{defaultValue:a.defaultValue,passive:a.modelValue===void 0}),l=q();return Or({modelValue:d,changeModelValue:v=>{d.value=v},orientation:o,dir:u,unmountOnHide:s,activationMode:a.activationMode,baseId:Me(void 0,"reka-tabs"),tabsList:l}),(v,k)=>(S(),K(r(he),{dir:r(u),"data-orientation":r(o),"as-child":v.asChild,as:v.as},{default:h(()=>[Z(v.$slots,"default",{modelValue:r(d)})]),_:3},8,["dir","data-orientation","as-child","as"]))}}),Rr=Lr;function ya(t,e){return`${t}-trigger-${e}`}function ba(t,e){return`${t}-content-${e}`}var xr=W({__name:"TabsContent",props:{value:{type:[String,Number],required:!0},forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t,{forwardRef:a}=de(),n=Ot(),o=ie(()=>ya(n.baseId,e.value)),s=ie(()=>ba(n.baseId,e.value)),i=ie(()=>e.value===n.modelValue.value),u=q(i.value);return be(()=>{requestAnimationFrame(()=>{u.value=!1})}),(d,l)=>(S(),K(r(Ct),{present:d.forceMount||i.value,"force-mount":""},{default:h(({present:v})=>[b(r(he),{id:s.value,ref:r(a),"as-child":d.asChild,as:d.as,role:"tabpanel","data-state":i.value?"active":"inactive","data-orientation":r(n).orientation.value,"aria-labelledby":o.value,hidden:!v,tabindex:"0",style:fa({animationDuration:u.value?"0s":void 0})},{default:h(()=>[!r(n).unmountOnHide.value||v?Z(d.$slots,"default",{key:0}):X("v-if",!0)]),_:2},1032,["id","as-child","as","data-state","data-orientation","aria-labelledby","hidden","style"])]),_:3},8,["present"]))}}),Tr=xr,Er=W({__name:"TabsList",props:{loop:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t,{loop:a}=Be(e),{forwardRef:n,currentElement:o}=de(),s=Ot();return s.tabsList=o,(i,u)=>(S(),K(r(Sr),{"as-child":"",orientation:r(s).orientation.value,dir:r(s).dir.value,loop:r(a)},{default:h(()=>[b(r(he),{ref:r(n),role:"tablist","as-child":i.asChild,as:i.as,"aria-orientation":r(s).orientation.value},{default:h(()=>[Z(i.$slots,"default")]),_:3},8,["as-child","as","aria-orientation"])]),_:3},8,["orientation","dir","loop"]))}}),Mr=Er,Dr=W({__name:"TabsTrigger",props:{value:{type:[String,Number],required:!0},disabled:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const e=t,{forwardRef:a}=de(),n=Ot(),o=ie(()=>ya(n.baseId,e.value)),s=ie(()=>ba(n.baseId,e.value)),i=ie(()=>e.value===n.modelValue.value);return(u,d)=>(S(),K(r(Ir),{"as-child":"",focusable:!u.disabled,active:i.value},{default:h(()=>[b(r(he),{id:o.value,ref:r(a),role:"tab",type:u.as==="button"?"button":void 0,as:u.as,"as-child":u.asChild,"aria-selected":i.value?"true":"false","aria-controls":s.value,"data-state":i.value?"active":"inactive",disabled:u.disabled,"data-disabled":u.disabled?"":void 0,"data-orientation":r(n).orientation.value,onMousedown:d[0]||(d[0]=Ta(l=>{!u.disabled&&l.ctrlKey===!1?r(n).changeModelValue(u.value):l.preventDefault()},["left"])),onKeydown:d[1]||(d[1]=xa(l=>r(n).changeModelValue(u.value),["enter","space"])),onFocus:d[2]||(d[2]=()=>{const l=r(n).activationMode!=="manual";!i.value&&!u.disabled&&l&&r(n).changeModelValue(u.value)})},{default:h(()=>[Z(u.$slots,"default")]),_:3},8,["id","type","as","as-child","aria-selected","aria-controls","data-state","disabled","data-disabled","data-orientation"])]),_:3},8,["focusable","active"]))}}),Ar=Dr;/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=Oe("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=Oe("flip-horizontal",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3",key:"1i73f7"}],["path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3",key:"saxlbk"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 14v2",key:"8jcxud"}],["path",{d:"M12 8v2",key:"1woqiv"}],["path",{d:"M12 2v2",key:"tus03m"}]]);/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=Oe("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=Oe("zap-off",[["path",{d:"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317",key:"193nxd"}],["path",{d:"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773",key:"27a7lr"}],["path",{d:"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643",key:"1e0qe9"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=Oe("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),mt=(t,e)=>e.some(a=>t instanceof a);let Et,Mt;function Fr(){return Et||(Et=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ur(){return Mt||(Mt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vt=new WeakMap,Ne=new WeakMap,$e=new WeakMap;function Vr(t){const e=new Promise((a,n)=>{const o=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{a(ye(t.result)),o()},i=()=>{n(t.error),o()};t.addEventListener("success",s),t.addEventListener("error",i)});return $e.set(e,t),e}function jr(t){if(vt.has(t))return;const e=new Promise((a,n)=>{const o=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{a(),o()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});vt.set(t,e)}let gt={get(t,e,a){if(t instanceof IDBTransaction){if(e==="done")return vt.get(t);if(e==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return ye(t[e])},set(t,e,a){return t[e]=a,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function wa(t){gt=t(gt)}function Nr(t){return Ur().includes(t)?function(...e){return t.apply(ht(this),e),ye(this.request)}:function(...e){return ye(t.apply(ht(this),e))}}function zr(t){return typeof t=="function"?Nr(t):(t instanceof IDBTransaction&&jr(t),mt(t,Fr())?new Proxy(t,gt):t)}function ye(t){if(t instanceof IDBRequest)return Vr(t);if(Ne.has(t))return Ne.get(t);const e=zr(t);return e!==t&&(Ne.set(t,e),$e.set(e,t)),e}const ht=t=>$e.get(t);function Kr(t,e,{blocked:a,upgrade:n,blocking:o,terminated:s}={}){const i=indexedDB.open(t,e),u=ye(i);return n&&i.addEventListener("upgradeneeded",d=>{n(ye(i.result),d.oldVersion,d.newVersion,ye(i.transaction),d)}),a&&i.addEventListener("blocked",d=>a(d.oldVersion,d.newVersion,d)),u.then(d=>{s&&d.addEventListener("close",()=>s()),o&&d.addEventListener("versionchange",l=>o(l.oldVersion,l.newVersion,l))}).catch(()=>{}),u}const Gr=["get","getKey","getAll","getAllKeys","count"],Wr=["put","add","delete","clear"],ze=new Map;function Dt(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ze.get(e))return ze.get(e);const a=e.replace(/FromIndex$/,""),n=e!==a,o=Wr.includes(a);if(!(a in(n?IDBIndex:IDBObjectStore).prototype)||!(o||Gr.includes(a)))return;const s=async function(i,...u){const d=this.transaction(i,o?"readwrite":"readonly");let l=d.store;return n&&(l=l.index(u.shift())),(await Promise.all([l[a](...u),o&&d.done]))[0]};return ze.set(e,s),s}wa(t=>({...t,get:(e,a,n)=>Dt(e,a)||t.get(e,a,n),has:(e,a)=>!!Dt(e,a)||t.has(e,a)}));const Hr=["continue","continuePrimaryKey","advance"],At={},yt=new WeakMap,_a=new WeakMap,Yr={get(t,e){if(!Hr.includes(e))return t[e];let a=At[e];return a||(a=At[e]=function(...n){yt.set(this,_a.get(this)[e](...n))}),a}};async function*Jr(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const a=new Proxy(e,Yr);for(_a.set(a,e),$e.set(a,ht(e));e;)yield a,e=await(yt.get(a)||e.continue()),yt.delete(a)}function Bt(t,e){return e===Symbol.asyncIterator&&mt(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&mt(t,[IDBIndex,IDBObjectStore])}wa(t=>({...t,get(e,a,n){return Bt(e,a)?Jr:t.get(e,a,n)},has(e,a){return Bt(e,a)||t.has(e,a)}}));const Zr="business-card-scanner",Qr=1;let Ce=null;async function Xr(){return Ce||(Ce=await Kr(Zr,Qr,{upgrade(t){t.objectStoreNames.contains("cards")||t.createObjectStore("cards",{keyPath:"id"}).createIndex("by-timestamp","timestamp"),t.objectStoreNames.contains("images")||t.createObjectStore("images",{keyPath:"id"})}}),Ce)}async function ve(){return Ce||await Xr()}async function en(){return(await(await ve()).getAllFromIndex("cards","by-timestamp")).reverse()}async function Le(t){return await(await ve()).get("cards",t)}async function tn(t){const a=(await ve()).transaction("cards","readwrite");await a.store.add(t),await a.done}async function Pt(t){await(await ve()).put("cards",t)}async function an(t){await(await ve()).delete("cards",t)}async function rn(t){const a=(await ve()).transaction("cards","readwrite");await Promise.all([...t.map(n=>a.store.delete(n)),a.done])}async function Re(t){return await(await ve()).get("images",t)}async function nn(t){const a=(await ve()).transaction("images","readwrite");await a.store.add(t),await a.done}async function on(t){await(await ve()).delete("images",t)}async function sn(t){const a=(await ve()).transaction("images","readwrite");await Promise.all([...t.map(n=>a.store.delete(n)),a.done])}async function ln(){if("storage"in navigator&&"estimate"in navigator.storage){const t=await navigator.storage.estimate(),e=t.usage||0,a=t.quota||0,n=a>0?e/a*100:0;return{usage:e,quota:a,usagePercent:n}}return null}async function un(t){const e=t.size,a=await cn(t),n=await $t(a,{maxWidth:1920,maxHeight:1080,quality:.8}),o=await $t(a,{maxWidth:200,maxHeight:200,quality:.7});return{compressed:n,thumbnail:o,originalSize:e,compressedSize:n.size}}function cn(t){return new Promise((e,a)=>{const n=new Image,o=URL.createObjectURL(t);n.onload=()=>{URL.revokeObjectURL(o),e(n)},n.onerror=()=>{URL.revokeObjectURL(o),a(new Error("Failed to load image"))},n.src=o})}async function $t(t,e){const{maxWidth:a,maxHeight:n,quality:o}=e,s=Math.min(1,a/t.width,n/t.height),i=document.createElement("canvas");i.width=Math.floor(t.width*s),i.height=Math.floor(t.height*s);const u=i.getContext("2d");if(!u)throw new Error("Failed to get canvas context");return u.drawImage(t,0,0,i.width,i.height),new Promise((d,l)=>{i.toBlob(v=>{v?d(v):l(new Error("Failed to compress image"))},"image/jpeg",o)})}function dn(t){return["image/jpeg","image/png","image/webp"].includes(t.type)}function qt(t){return new Promise((e,a)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=a,n.readAsArrayBuffer(t)})}function Ke(t,e="image/jpeg"){return new Blob([t],{type:e})}function fn(t){return URL.createObjectURL(t)}function Ft(t){URL.revokeObjectURL(t)}const Rt=Ea("businessCard",()=>{const t=q([]),e=q(!1),a=q(null),n=q(new Set),o=ie(()=>t.value.length),s=ie(()=>n.value.size),i=ie(()=>t.value.length>0);function u(){return crypto.randomUUID()}async function d(){e.value=!0,a.value=null;try{t.value=await en()}catch(R){a.value="Failed to load cards",console.error("Load cards error:",R)}finally{e.value=!1}}async function l(R,w,D){e.value=!0,a.value=null;try{const B=await un(D),P=u(),_=u(),m=await qt(B.compressed),Q=await qt(B.thumbnail),ge={id:_,image:m,thumbnail:Q,imageType:"image/jpeg"},fe=Date.now(),_e={id:P,timestamp:fe,imageId:_,data:Fe(R),rawOcr:w,lastModified:fe};await nn(ge),await tn(_e),await d()}catch(B){throw a.value="Failed to add card",console.error("Add card error:",B),B}finally{e.value=!1}}async function v(R,w){e.value=!0,a.value=null;try{const D=await Le(R);if(!D)throw new Error("Card not found");const B={...D,data:{...D.data,...Fe(w)},lastModified:Date.now()};await Pt(B),await d()}catch(D){throw a.value="Failed to update card",console.error("Update card error:",D),D}finally{e.value=!1}}async function k(R,w){e.value=!0,a.value=null;try{const D=await Le(R);if(!D)throw new Error("Card not found");const B=await Re(D.imageId);if(!B)throw new Error("Card image not found");const P=Ke(B.image,B.imageType),{getOcrService:_}=await Ma(async()=>{const{getOcrService:fe}=await Promise.resolve().then(()=>$n);return{getOcrService:fe}},void 0),m=_();await m.isReady();const Q=await m.recognize(P,w),ge={...D,data:Fe(Q.extractedData),rawOcr:Q.text,lastModified:Date.now()};return await Pt(ge),await d(),Q.extractedData}catch(D){throw a.value="Failed to rescan card",console.error("Rescan card error:",D),D}finally{e.value=!1}}async function O(R){e.value=!0,a.value=null;try{const w=await Le(R);w&&(await on(w.imageId),await an(R),n.value.delete(R),await d())}catch(w){throw a.value="Failed to delete card",console.error("Delete card error:",w),w}finally{e.value=!1}}async function T(R){e.value=!0,a.value=null;try{const D=(await Promise.all(R.map(B=>Le(B)))).filter(B=>B!==void 0).map(B=>B.imageId);await sn(D),await rn(R),R.forEach(B=>n.value.delete(B)),await d()}catch(w){throw a.value="Failed to delete cards",console.error("Delete cards error:",w),w}finally{e.value=!1}}async function G(R){return await Re(R)}async function M(R){try{const w=await Re(R);if(!w)return null;const D=Ke(w.thumbnail,w.imageType);return URL.createObjectURL(D)}catch(w){return console.error("Failed to get thumbnail URL:",w),null}}async function c(R){try{const w=await Re(R);if(!w)return null;const D=Ke(w.image,w.imageType);return URL.createObjectURL(D)}catch(w){return console.error("Failed to get image URL:",w),null}}function g(R){if(!R.trim())return t.value;const w=R.toLowerCase();return t.value.filter(D=>[D.data.name,D.data.company,D.data.email,D.data.phone,D.data.title,D.data.address].filter(Boolean).join(" ").toLowerCase().includes(w))}function E(R,w){const D=[...R];switch(w){case"date":return D.sort((B,P)=>P.timestamp-B.timestamp);case"name":return D.sort((B,P)=>{const _=B.data.name||"",m=P.data.name||"";return _.localeCompare(m)});case"company":return D.sort((B,P)=>{const _=B.data.company||"",m=P.data.company||"";return _.localeCompare(m)});default:return D}}function F(R){n.value.has(R)?n.value.delete(R):n.value.add(R)}function L(){t.value.forEach(R=>n.value.add(R.id))}function N(){n.value.clear()}function H(R){const w=R?t.value.filter(B=>R.includes(B.id)):t.value,D={exportDate:new Date().toISOString(),cardCount:w.length,cards:w.map(B=>({...B,imageId:B.imageId}))};return JSON.stringify(D,null,2)}async function ee(){return await ln()}return{cards:t,isLoading:e,error:a,selectedCardIds:n,cardCount:o,selectedCount:s,hasCards:i,loadCards:d,addCard:l,updateCard:v,rescanCard:k,deleteCard:O,deleteCards:T,getCardImage:G,getCardThumbnailUrl:M,getCardImageUrl:c,searchCards:g,sortCards:E,toggleCardSelection:F,selectAll:L,clearSelection:N,exportToJson:H,getStorageInfo:ee}});var Ge={exports:{}},Ut;function pn(){return Ut||(Ut=1,(function(t){var e=(function(a){var n=Object.prototype,o=n.hasOwnProperty,s=Object.defineProperty||function(p,f,y){p[f]=y.value},i,u=typeof Symbol=="function"?Symbol:{},d=u.iterator||"@@iterator",l=u.asyncIterator||"@@asyncIterator",v=u.toStringTag||"@@toStringTag";function k(p,f,y){return Object.defineProperty(p,f,{value:y,enumerable:!0,configurable:!0,writable:!0}),p[f]}try{k({},"")}catch{k=function(f,y,A){return f[y]=A}}function O(p,f,y,A){var x=f&&f.prototype instanceof F?f:F,z=Object.create(x.prototype),te=new ge(A||[]);return s(z,"_invoke",{value:P(p,y,te)}),z}a.wrap=O;function T(p,f,y){try{return{type:"normal",arg:p.call(f,y)}}catch(A){return{type:"throw",arg:A}}}var G="suspendedStart",M="suspendedYield",c="executing",g="completed",E={};function F(){}function L(){}function N(){}var H={};k(H,d,function(){return this});var ee=Object.getPrototypeOf,R=ee&&ee(ee(fe([])));R&&R!==n&&o.call(R,d)&&(H=R);var w=N.prototype=F.prototype=Object.create(H);L.prototype=N,s(w,"constructor",{value:N,configurable:!0}),s(N,"constructor",{value:L,configurable:!0}),L.displayName=k(N,v,"GeneratorFunction");function D(p){["next","throw","return"].forEach(function(f){k(p,f,function(y){return this._invoke(f,y)})})}a.isGeneratorFunction=function(p){var f=typeof p=="function"&&p.constructor;return f?f===L||(f.displayName||f.name)==="GeneratorFunction":!1},a.mark=function(p){return Object.setPrototypeOf?Object.setPrototypeOf(p,N):(p.__proto__=N,k(p,v,"GeneratorFunction")),p.prototype=Object.create(w),p},a.awrap=function(p){return{__await:p}};function B(p,f){function y(z,te,ae,ne){var re=T(p[z],p,te);if(re.type==="throw")ne(re.arg);else{var U=re.arg,V=U.value;return V&&typeof V=="object"&&o.call(V,"__await")?f.resolve(V.__await).then(function(J){y("next",J,ae,ne)},function(J){y("throw",J,ae,ne)}):f.resolve(V).then(function(J){U.value=J,ae(U)},function(J){return y("throw",J,ae,ne)})}}var A;function x(z,te){function ae(){return new f(function(ne,re){y(z,te,ne,re)})}return A=A?A.then(ae,ae):ae()}s(this,"_invoke",{value:x})}D(B.prototype),k(B.prototype,l,function(){return this}),a.AsyncIterator=B,a.async=function(p,f,y,A,x){x===void 0&&(x=Promise);var z=new B(O(p,f,y,A),x);return a.isGeneratorFunction(f)?z:z.next().then(function(te){return te.done?te.value:z.next()})};function P(p,f,y){var A=G;return function(z,te){if(A===c)throw new Error("Generator is already running");if(A===g){if(z==="throw")throw te;return _e()}for(y.method=z,y.arg=te;;){var ae=y.delegate;if(ae){var ne=_(ae,y);if(ne){if(ne===E)continue;return ne}}if(y.method==="next")y.sent=y._sent=y.arg;else if(y.method==="throw"){if(A===G)throw A=g,y.arg;y.dispatchException(y.arg)}else y.method==="return"&&y.abrupt("return",y.arg);A=c;var re=T(p,f,y);if(re.type==="normal"){if(A=y.done?g:M,re.arg===E)continue;return{value:re.arg,done:y.done}}else re.type==="throw"&&(A=g,y.method="throw",y.arg=re.arg)}}}function _(p,f){var y=f.method,A=p.iterator[y];if(A===i)return f.delegate=null,y==="throw"&&p.iterator.return&&(f.method="return",f.arg=i,_(p,f),f.method==="throw")||y!=="return"&&(f.method="throw",f.arg=new TypeError("The iterator does not provide a '"+y+"' method")),E;var x=T(A,p.iterator,f.arg);if(x.type==="throw")return f.method="throw",f.arg=x.arg,f.delegate=null,E;var z=x.arg;if(!z)return f.method="throw",f.arg=new TypeError("iterator result is not an object"),f.delegate=null,E;if(z.done)f[p.resultName]=z.value,f.next=p.nextLoc,f.method!=="return"&&(f.method="next",f.arg=i);else return z;return f.delegate=null,E}D(w),k(w,v,"Generator"),k(w,d,function(){return this}),k(w,"toString",function(){return"[object Generator]"});function m(p){var f={tryLoc:p[0]};1 in p&&(f.catchLoc=p[1]),2 in p&&(f.finallyLoc=p[2],f.afterLoc=p[3]),this.tryEntries.push(f)}function Q(p){var f=p.completion||{};f.type="normal",delete f.arg,p.completion=f}function ge(p){this.tryEntries=[{tryLoc:"root"}],p.forEach(m,this),this.reset(!0)}a.keys=function(p){var f=Object(p),y=[];for(var A in f)y.push(A);return y.reverse(),function x(){for(;y.length;){var z=y.pop();if(z in f)return x.value=z,x.done=!1,x}return x.done=!0,x}};function fe(p){if(p){var f=p[d];if(f)return f.call(p);if(typeof p.next=="function")return p;if(!isNaN(p.length)){var y=-1,A=function x(){for(;++y<p.length;)if(o.call(p,y))return x.value=p[y],x.done=!1,x;return x.value=i,x.done=!0,x};return A.next=A}}return{next:_e}}a.values=fe;function _e(){return{value:i,done:!0}}return ge.prototype={constructor:ge,reset:function(p){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(Q),!p)for(var f in this)f.charAt(0)==="t"&&o.call(this,f)&&!isNaN(+f.slice(1))&&(this[f]=i)},stop:function(){this.done=!0;var p=this.tryEntries[0],f=p.completion;if(f.type==="throw")throw f.arg;return this.rval},dispatchException:function(p){if(this.done)throw p;var f=this;function y(ne,re){return z.type="throw",z.arg=p,f.next=ne,re&&(f.method="next",f.arg=i),!!re}for(var A=this.tryEntries.length-1;A>=0;--A){var x=this.tryEntries[A],z=x.completion;if(x.tryLoc==="root")return y("end");if(x.tryLoc<=this.prev){var te=o.call(x,"catchLoc"),ae=o.call(x,"finallyLoc");if(te&&ae){if(this.prev<x.catchLoc)return y(x.catchLoc,!0);if(this.prev<x.finallyLoc)return y(x.finallyLoc)}else if(te){if(this.prev<x.catchLoc)return y(x.catchLoc,!0)}else if(ae){if(this.prev<x.finallyLoc)return y(x.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(p,f){for(var y=this.tryEntries.length-1;y>=0;--y){var A=this.tryEntries[y];if(A.tryLoc<=this.prev&&o.call(A,"finallyLoc")&&this.prev<A.finallyLoc){var x=A;break}}x&&(p==="break"||p==="continue")&&x.tryLoc<=f&&f<=x.finallyLoc&&(x=null);var z=x?x.completion:{};return z.type=p,z.arg=f,x?(this.method="next",this.next=x.finallyLoc,E):this.complete(z)},complete:function(p,f){if(p.type==="throw")throw p.arg;return p.type==="break"||p.type==="continue"?this.next=p.arg:p.type==="return"?(this.rval=this.arg=p.arg,this.method="return",this.next="end"):p.type==="normal"&&f&&(this.next=f),E},finish:function(p){for(var f=this.tryEntries.length-1;f>=0;--f){var y=this.tryEntries[f];if(y.finallyLoc===p)return this.complete(y.completion,y.afterLoc),Q(y),E}},catch:function(p){for(var f=this.tryEntries.length-1;f>=0;--f){var y=this.tryEntries[f];if(y.tryLoc===p){var A=y.completion;if(A.type==="throw"){var x=A.arg;Q(y)}return x}}throw new Error("illegal catch attempt")},delegateYield:function(p,f,y){return this.delegate={iterator:fe(p),resultName:f,nextLoc:y},this.method==="next"&&(this.arg=i),E}},a})(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(Ge)),Ge.exports}var We,Vt;function xt(){return Vt||(Vt=1,We=(t,e)=>`${t}-${e}-${Math.random().toString(16).slice(3,8)}`),We}var He,jt;function Ca(){if(jt)return He;jt=1;const t=xt();let e=0;return He=({id:a,action:n,payload:o={}})=>{let s=a;return typeof s>"u"&&(s=t("Job",e),e+=1),{id:s,action:n,payload:o}},He}var ke={},Nt;function Tt(){if(Nt)return ke;Nt=1;let t=!1;return ke.logging=t,ke.setLogging=e=>{t=e},ke.log=(...e)=>t?console.log.apply(this,e):null,ke}var Ye,zt;function mn(){if(zt)return Ye;zt=1;const t=Ca(),{log:e}=Tt(),a=xt();let n=0;return Ye=()=>{const o=a("Scheduler",n),s={},i={};let u=[];n+=1;const d=()=>u.length,l=()=>Object.keys(s).length,v=()=>{if(u.length!==0){const M=Object.keys(s);for(let c=0;c<M.length;c+=1)if(typeof i[M[c]]>"u"){u[0](s[M[c]]);break}}},k=(M,c)=>new Promise((g,E)=>{const F=t({action:M,payload:c});u.push(async L=>{u.shift(),i[L.id]=F;try{g(await L[M].apply(this,[...c,F.id]))}catch(N){E(N)}finally{delete i[L.id],v()}}),e(`[${o}]: Add ${F.id} to JobQueue`),e(`[${o}]: JobQueue length=${u.length}`),v()});return{addWorker:M=>(s[M.id]=M,e(`[${o}]: Add ${M.id}`),e(`[${o}]: Number of workers=${l()}`),v(),M.id),addJob:async(M,...c)=>{if(l()===0)throw Error(`[${o}]: You need to have at least one worker before adding jobs`);return k(M,c)},terminate:async()=>{Object.keys(s).forEach(async M=>{await s[M].terminate()}),u=[]},getQueueLen:d,getNumWorkers:l}},Ye}function vn(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Je,Kt;function gn(){return Kt||(Kt=1,Je=t=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof vn=="function"&&(e.type="node"),typeof t>"u"?e:e[t]}),Je}var Ze,Gt;function hn(){if(Gt)return Ze;Gt=1;const e=gn()("type")==="browser"?a=>new URL(a,window.location.href).href:a=>a;return Ze=a=>{const n={...a};return["corePath","workerPath","langPath"].forEach(o=>{a[o]&&(n[o]=e(n[o]))}),n},Ze}var Qe,Wt;function Sa(){return Wt||(Wt=1,Qe={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),Qe}const yn="6.0.1",bn={version:yn};var Xe,Ht;function wn(){return Ht||(Ht=1,Xe={workerBlobURL:!0,logger:()=>{}}),Xe}var et,Yt;function _n(){if(Yt)return et;Yt=1;const t=bn.version;return et={...wn(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${t}/dist/worker.min.js`},et}var tt,Jt;function Cn(){return Jt||(Jt=1,tt=({workerPath:t,workerBlobURL:e})=>{let a;if(Blob&&URL&&e){const n=new Blob([`importScripts("${t}");`],{type:"application/javascript"});a=new Worker(URL.createObjectURL(n))}else a=new Worker(t);return a}),tt}var at,Zt;function Sn(){return Zt||(Zt=1,at=t=>{t.terminate()}),at}var rt,Qt;function kn(){return Qt||(Qt=1,rt=(t,e)=>{t.onmessage=({data:a})=>{e(a)}}),rt}var nt,Xt;function In(){return Xt||(Xt=1,nt=async(t,e)=>{t.postMessage(e)}),nt}var ot,ea;function On(){if(ea)return ot;ea=1;const t=a=>new Promise((n,o)=>{const s=new FileReader;s.onload=()=>{n(s.result)},s.onerror=({target:{error:{code:i}}})=>{o(Error(`File could not be read! Code=${i}`))},s.readAsArrayBuffer(a)}),e=async a=>{let n=a;if(typeof a>"u")return"undefined";if(typeof a=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(a)?n=atob(a.split(",")[1]).split("").map(o=>o.charCodeAt(0)):n=await(await fetch(a)).arrayBuffer();else if(typeof HTMLElement<"u"&&a instanceof HTMLElement)a.tagName==="IMG"&&(n=await e(a.src)),a.tagName==="VIDEO"&&(n=await e(a.poster)),a.tagName==="CANVAS"&&await new Promise(o=>{a.toBlob(async s=>{n=await t(s),o()})});else if(typeof OffscreenCanvas<"u"&&a instanceof OffscreenCanvas){const o=await a.convertToBlob();n=await t(o)}else(a instanceof File||a instanceof Blob)&&(n=await t(a));return new Uint8Array(n)};return ot=e,ot}var st,ta;function Ln(){if(ta)return st;ta=1;const t=_n(),e=Cn(),a=Sn(),n=kn(),o=In(),s=On();return st={defaultOptions:t,spawnWorker:e,terminateWorker:a,onMessage:n,send:o,loadImage:s},st}var it,aa;function ka(){if(aa)return it;aa=1;const t=hn(),e=Ca(),{log:a}=Tt(),n=xt(),o=Sa(),{defaultOptions:s,spawnWorker:i,terminateWorker:u,onMessage:d,loadImage:l,send:v}=Ln();let k=0;return it=async(O="eng",T=o.LSTM_ONLY,G={},M={})=>{const c=n("Worker",k),{logger:g,errorHandler:E,...F}=t({...s,...G}),L={},N=typeof O=="string"?O.split("+"):O;let H=T,ee=M;const R=[o.DEFAULT,o.LSTM_ONLY].includes(T)&&!F.legacyCore;let w,D;const B=new Promise((U,V)=>{D=U,w=V}),P=U=>{w(U.message)};let _=i(F);_.onerror=P,k+=1;const m=({id:U,action:V,payload:J})=>new Promise((oe,se)=>{a(`[${c}]: Start ${U}, action=${V}`);const pe=`${V}-${U}`;L[pe]={resolve:oe,reject:se},v(_,{workerId:c,jobId:U,action:V,payload:J})}),Q=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),ge=U=>m(e({id:U,action:"load",payload:{options:{lstmOnly:R,corePath:F.corePath,logging:F.logging}}})),fe=(U,V,J)=>m(e({id:J,action:"FS",payload:{method:"writeFile",args:[U,V]}})),_e=(U,V)=>m(e({id:V,action:"FS",payload:{method:"readFile",args:[U,{encoding:"utf8"}]}})),p=(U,V)=>m(e({id:V,action:"FS",payload:{method:"unlink",args:[U]}})),f=(U,V,J)=>m(e({id:J,action:"FS",payload:{method:U,args:V}})),y=(U,V)=>m(e({id:V,action:"loadLanguage",payload:{langs:U,options:{langPath:F.langPath,dataPath:F.dataPath,cachePath:F.cachePath,cacheMethod:F.cacheMethod,gzip:F.gzip,lstmOnly:[o.DEFAULT,o.LSTM_ONLY].includes(H)&&!F.legacyLang}}})),A=(U,V,J,oe)=>m(e({id:oe,action:"initialize",payload:{langs:U,oem:V,config:J}})),x=(U="eng",V,J,oe)=>{if(R&&[o.TESSERACT_ONLY,o.TESSERACT_LSTM_COMBINED].includes(V))throw Error("Legacy model requested but code missing.");const se=V||H;H=se;const pe=J||ee;ee=pe;const qe=(typeof U=="string"?U.split("+"):U).filter(La=>!N.includes(La));return N.push(...qe),qe.length>0?y(qe,oe).then(()=>A(U,se,pe,oe)):A(U,se,pe,oe)},z=(U={},V)=>m(e({id:V,action:"setParameters",payload:{params:U}})),te=async(U,V={},J={text:!0},oe)=>m(e({id:oe,action:"recognize",payload:{image:await l(U),options:V,output:J}})),ae=async(U,V)=>{if(R)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return m(e({id:V,action:"detect",payload:{image:await l(U)}}))},ne=async()=>(_!==null&&(u(_),_=null),Promise.resolve());d(_,({workerId:U,jobId:V,status:J,action:oe,data:se})=>{const pe=`${oe}-${V}`;if(J==="resolve")a(`[${U}]: Complete ${V}`),L[pe].resolve({jobId:V,data:se}),delete L[pe];else if(J==="reject")if(L[pe].reject(se),delete L[pe],oe==="load"&&w(se),E)E(se);else throw Error(se);else J==="progress"&&g({...se,userJobId:V})});const re={id:c,worker:_,load:Q,writeText:fe,readText:_e,removeFile:p,FS:f,reinitialize:x,setParameters:z,recognize:te,detect:ae,terminate:ne};return ge().then(()=>y(O)).then(()=>A(O,T,M)).then(()=>D(re)).catch(()=>{}),B},it}var lt,ra;function Rn(){if(ra)return lt;ra=1;const t=ka();return lt={recognize:async(n,o,s)=>{const i=await t(o,1,s);return i.recognize(n).finally(async()=>{await i.terminate()})},detect:async(n,o)=>{const s=await t("osd",0,o);return s.detect(n).finally(async()=>{await s.terminate()})}},lt}var ut,na;function xn(){return na||(na=1,ut={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),ut}var ct,oa;function Tn(){return oa||(oa=1,ct={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),ct}var dt,sa;function En(){if(sa)return dt;sa=1,pn();const t=mn(),e=ka(),a=Rn(),n=xn(),o=Sa(),s=Tn(),{setLogging:i}=Tt();return dt={languages:n,OEM:o,PSM:s,createScheduler:t,createWorker:e,setLogging:i,...a},dt}var Mn=En();const $={email:/[\w.+-]+@[\w.-]+\.[a-zA-Z]{2,}/gi,phone:/(\+?886[-.\s])?\(?0?\d{2,4}\)?[-.\s]?\d{3,4}[-.\s]?\d{3,4}|(\+?\d{1,3}[-.\s])?\(?\d{2,4}\)?[-.\s]\d{3,4}[-.\s]\d{3,4}|\d{2,4}-\d{3,4}-\d{3,4}|\b\d{10}\b/g,url:/https?:\/\/[\w.-]+\.[\w]{2,}(\/[^\s]*)?/gi,linkedin:/linkedin\.com\/in\/[\w-]+/gi,twitter:/twitter\.com\/[\w]+/gi,facebook:/facebook\.com\/[\w.]+/gi,fax:/(?:fax|ÂÇ≥Áúü)[:Ôºö]?\s*(\+?\d{1,3}[-.\s]?)?\(?\d{2,4}\)?[-.\s]?\d{3,4}[-.\s]?\d{3,4}/gi,chineseTitle:/^(Ëë£‰∫ãÈï∑|Á∏ΩÁ∂ìÁêÜ|Âü∑Ë°åÈï∑|ÂâØÁ∏ΩÁ∂ìÁêÜ|ÂâØÁ∏ΩË£Å|Á∏ΩË£Å|Á∂ìÁêÜ|‰∏ª‰ªª|ÈÉ®Èï∑|Ë™≤Èï∑|ÁµÑÈï∑|Â∞àÂì°|‰∏ªÁÆ°|È°ßÂïè|Á∏ΩÁõ£)$/,titleKeywords:/(Ëë£‰∫ãÈï∑|Á∏ΩÁ∂ìÁêÜ|Âü∑Ë°åÈï∑|ÂâØÁ∏Ω|Á∏ΩË£Å|Á∂ìÁêÜ|‰∏ª‰ªª|ÈÉ®Èï∑|Ë™≤Èï∑|ÁµÑÈï∑|Â∞àÂì°|‰∏ªÁÆ°|È°ßÂïè|Á∏ΩÁõ£|.*Èï∑)$/,taxId:/(?:Áµ±Á∑®|Áµ±‰∏ÄÁ∑®Ëôü|Tax\s*ID)[:Ôºö]?\s*(\d{8})/gi,addressKeywords:/(?:Âú∞ÂùÄ|ÂùÄ|address|Â±ïÁ§∫È§®|Ëæ¶ÂÖ¨ÂÆ§|office)[:Ôºö]?\s*/gi,garbageChars:/[^\u4e00-\u9fff\w\s@.+\-()\/,;:Ôºö"]/g,repeatingChars:/(.)\1{4,}/g,excessiveSpaces:/\s{3,}/g};function Dn(t){if(!t||t.length===0)return 0;let e=100;const a=(t.match($.garbageChars)||[]).length;e-=a*5,$.repeatingChars.test(t)&&(e-=30),$.excessiveSpaces.test(t)&&(e-=20),t.length<2&&(e-=50),(t.match(/\d/g)||[]).length/t.length>.8&&!$.phone.test(t)&&(e-=20);const s=(t.match(/[\u4e00-\u9fff]/g)||[]).length;return s>0&&(e+=Math.min(s*2,20)),($.email.test(t)||$.phone.test(t)||$.url.test(t))&&(e+=20),Math.max(0,Math.min(100,e))}function An(t){let e=t;return e=e.replace($.garbageChars,""),e=e.replace($.excessiveSpaces," "),e=e.replace(/([^a-zA-Z0-9\u4e00-\u9fff])\1{2,}/g,"$1$1"),e.trim()}function Bn(t){return t.map(e=>An(e)).filter(e=>e.length===0?!1:Dn(e)>=40)}function ia(t){let e=t.replace(/[oO]/g,"0").replace(/[lI]/g,"1").replace(/[zZ]/g,"2").replace(/[sS]/g,"5");return e=e.replace(/[^\d\-+().\s]/g,""),e.trim()}function Pn(t){const e=t.split(`
`).map(c=>c.trim()).filter(c=>c.length>0),a=Bn(e),n={},o=/(inc\.|ltd\.|corp\.|limited|company|ÂÖ¨Âè∏|ÊúâÈôêÂÖ¨Âè∏|ËÇ°‰ªΩ|ÈõÜÂúò|‰ºÅÊ•≠)/i;if(a.length===1&&a[0]&&o.test(a[0]))return n.company=xe(a[0]),n;if(a.length===2&&a[0]&&a[1]&&o.test(a[0])&&/(?:Â∏Ç|ÂçÄ|Ë∑Ø|Ë°ó|Â∑∑|ÂºÑ|Ëôü|Ê®ì|street|road|avenue|floor)/i.test(a[1]))return n.company=xe(a[0]),n.address=a[1],n;const s=a.join(`
`),i=s.match($.email);i&&i.length>0&&(n.email=i[0]);const u=s.match($.phone);if(u&&u.length>0){const c=u.filter(g=>{const E=s.indexOf(g),F=s.substring(Math.max(0,E-10),E);if(/(fax|ÂÇ≥Áúü)/i.test(F))return!1;const L=s[E-1]||"",N=s[E+g.length]||"";return!(/\d/.test(L)||/\d/.test(N))});c.length>0&&c[0]&&(n.phone=ia(c[0]))}const d=s.match($.fax);if(d&&d.length>0){const c=d[0].replace(/(?:fax|ÂÇ≥Áúü)[:Ôºö]?\s*/gi,"").trim();n.fax=ia(c)}const l=s.match($.url);l&&l.length>0&&(n.website=l[0]);const v=[...s.match($.linkedin)||[],...s.match($.twitter)||[],...s.match($.facebook)||[]];v.length>0&&(n.socialMedia=v.join(", "));const k=s.match($.taxId);k&&k.length>0&&k[0].match(/\d{8}/);let O=!1;for(let c=0;c<Math.min(a.length,10);c++){const g=a[c];if(!g)continue;const E=/[\u4e00-\u9fff]/.test(g),F=/[A-Za-z]{2,}/.test(g);if(!($.email.test(g)||$.phone.test(g)||$.url.test(g)||o.test(g))&&E&&F&&g.length<50){n.name=g,O=!0;break}}if(!O&&a.length>0&&a[0]){const c=a[0];c.length>3&&c.length<80&&!$.email.test(c)&&!$.phone.test(c)&&(n.name=c)}let T=!1;for(let c=0;c<Math.min(a.length,8);c++){const g=a[c];if(!g||n.name&&g===n.name||$.email.test(g)||$.phone.test(g)||$.url.test(g)||o.test(g))continue;const E=g.replace(/^[A-Za-z0-9]\s+/,"").trim();if($.chineseTitle.test(E)){n.title=E,T=!0;break}if($.titleKeywords.test(E)&&E.length<20){n.title=E,T=!0;break}}if(!T&&a.length>1&&a[1]){const c=a[1];c!==n.name&&c.length<60&&!$.email.test(c)&&!$.phone.test(c)&&!$.url.test(c)&&(n.title=c)}const G=a.find(c=>o.test(c));if(G&&G.length<100)n.company=xe(G);else for(let c=2;c<Math.min(a.length,6);c++){const g=a[c];if(g&&g.length>2&&g.length<100&&!$.email.test(g)&&!$.phone.test(g)&&!$.url.test(g)&&!$.chineseTitle.test(g.trim())&&g!==n.name&&g!==n.title&&(o.test(g)||g.length<50&&c<=3)){n.company=xe(g);break}}const M=a.filter(c=>{const g=/(?:Âú∞ÂùÄ|ÂùÄ|address|Â±ïÁ§∫È§®|Ëæ¶ÂÖ¨ÂÆ§|office)[:Ôºö]/i.test(c),E=/(?:Â∏Ç|ÂçÄ|Ë∑Ø|Ë°ó|Â∑∑|ÂºÑ|Ëôü|Ê®ì|street|road|avenue|floor)/i.test(c);return(g||E)&&c.length>10&&c.length<200&&!$.email.test(c)&&!$.phone.test(c)&&!$.url.test(c)&&c!==n.name&&c!==n.title&&c!==n.company});if(M.length>0){const c=M.map(g=>g.replace($.addressKeywords,"").replace(/^[\/\\]+\s*/,"").trim());n.address=c[0]}else{const c=a.find(g=>g.length>20&&g.length<200&&!$.email.test(g)&&!$.phone.test(g)&&!$.url.test(g)&&g!==n.name&&g!==n.title&&g!==n.company);c&&(n.address=c.replace(/^[\/\\]+\s*/,"").trim())}return n}function xe(t){let e=t.trim();return e=e.replace(/^[\d\s\-_.,:;!?@#$%^&*()[\]{}|\\/<>~`'"]+/,""),e=e.replace(/^[A-Za-z]\s+/,""),e.trim()}class Ia{worker=null;initialized=!1;version="v2.1.0";async init(){if(!(this.initialized&&this.worker)){console.log(`üîç OCR Service initializing... Version: ${this.version}`);try{this.worker=await Mn.createWorker("chi_tra+eng",1,{errorHandler:e=>console.error("Tesseract error:",e),logger:e=>{e.status==="recognizing text"&&console.log(`OCR Progress: ${Math.round(e.progress*100)}%`)}}),await this.worker.setParameters({tessedit_pageseg_mode:6,preserve_interword_spaces:"1"}),this.initialized=!0}catch(e){throw console.error("Failed to initialize Tesseract worker:",e),new Error("OCR service initialization failed")}}}async isReady(){try{return await this.init(),this.initialized}catch{return!1}}async recognize(e,a){if(await this.init(),!this.worker)throw new Error("OCR worker not initialized");try{const n=await this.preprocessImage(e),o=await this.worker.recognize(n);a&&a(100);const s=o.data.text,i=o.data.confidence;console.log(`üìä OCR Service ${this.version} - Confidence: ${i}%`),console.log("OCR Raw Text:",s);const u=Pn(s);return{text:s,confidence:i,extractedData:u}}catch(n){throw console.error("OCR recognition failed:",n),new Error("Failed to process image with OCR")}}async preprocessImage(e){return new Promise((a,n)=>{const o=new Image,s=URL.createObjectURL(e);o.onload=()=>{try{const i=document.createElement("canvas"),u=i.getContext("2d");if(!u){n(new Error("Could not get canvas context"));return}const d=2;i.width=o.width*d,i.height=o.height*d,u.drawImage(o,0,0,i.width,i.height);const l=u.getImageData(0,0,i.width,i.height),v=l.data,k=new Uint8Array(v.length/4);for(let L=0,N=0;L<v.length;L+=4,N++){const H=v[L]??0,ee=v[L+1]??0,R=v[L+2]??0;k[N]=Math.round(.299*H+.587*ee+.114*R)}const O=new Array(256).fill(0);k.forEach(L=>O[L]++);const T=k.length;let G=0;for(let L=0;L<256;L++)G+=L*O[L];let M=0,c=0,g=0,E=0,F=128;for(let L=0;L<256;L++){if(c+=O[L],c===0)continue;if(g=T-c,g===0)break;M+=L*O[L];const N=M/c,H=(G-M)/g,ee=c*g*(N-H)*(N-H);ee>E&&(E=ee,F=L)}F=Math.min(F+20,255);for(let L=0,N=0;L<v.length;L+=4,N++){const H=(k[N]??0)>F?255:0;v[L]=H,v[L+1]=H,v[L+2]=H}u.putImageData(l,0,0),URL.revokeObjectURL(s),a(i)}catch(i){URL.revokeObjectURL(s),n(i)}},o.onerror=()=>{URL.revokeObjectURL(s),n(new Error("Failed to load image for preprocessing"))},o.src=s})}async blobToImageData(e){return URL.createObjectURL(e)}async terminate(){this.worker&&(await this.worker.terminate(),this.worker=null,this.initialized=!1)}}let ft=null;function Oa(){return ft||(ft=new Ia),ft}const $n=Object.freeze(Object.defineProperty({__proto__:null,TesseractOcrService:Ia,getOcrService:Oa},Symbol.toStringTag,{value:"Module"})),qn=W({__name:"Tabs",props:{defaultValue:{},orientation:{},dir:{},activationMode:{},modelValue:{},unmountOnHide:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["update:modelValue"],setup(t,{emit:e}){const o=It(t,e);return(s,i)=>(S(),K(r(Rr),St(kt(r(o))),{default:h(()=>[Z(s.$slots,"default")]),_:3},16))}}),la=W({__name:"TabsContent",props:{value:{},forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(t){const e=t,a=Pe(e,"class");return(n,o)=>(S(),K(r(Tr),ce({class:r(Ie)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e.class)},r(a)),{default:h(()=>[Z(n.$slots,"default")]),_:3},16,["class"]))}}),Fn=W({__name:"TabsList",props:{loop:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(t){const e=t,a=Pe(e,"class");return(n,o)=>(S(),K(r(Mr),ce(r(a),{class:r(Ie)("inline-flex items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e.class)}),{default:h(()=>[Z(n.$slots,"default")]),_:3},16,["class"]))}}),Un={class:"truncate"},ua=W({__name:"TabsTrigger",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(t){const e=t,a=Pe(e,"class"),n=Da(a);return(o,s)=>(S(),K(r(Ar),ce(r(n),{class:r(Ie)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e.class)}),{default:h(()=>[C("span",Un,[Z(o.$slots,"default")])]),_:3},16,["class"]))}}),le=W({__name:"Input",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,o=Aa(a,"modelValue",e,{passive:!0,defaultValue:a.defaultValue});return(s,i)=>Ae((S(),j("input",{"onUpdate:modelValue":i[0]||(i[0]=u=>Ba(o)?o.value=u:null),class:ma(r(Ie)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a.class))},null,2)),[[pa,r(o)]])}}),Vn={key:0,class:"text-sm text-muted-foreground"},jn=["src"],Nn={key:2,class:"text-sm text-muted-foreground"},zn=W({__name:"CardThumbnail",props:{imageId:{}},emits:["click"],setup(t,{emit:e}){const a=t,n=e,o=Rt(),s=q(null),i=q(!0);return be(async()=>{try{s.value=await o.getCardThumbnailUrl(a.imageId)}catch(u){console.error("Failed to load thumbnail:",u)}finally{i.value=!1}}),Se(()=>{s.value&&URL.revokeObjectURL(s.value)}),(u,d)=>(S(),j("div",{class:"w-full h-32 bg-muted rounded-md overflow-hidden flex items-center justify-center cursor-pointer hover:opacity-80 transition-opacity",onClick:d[0]||(d[0]=l=>n("click"))},[i.value?(S(),j("div",Vn,"Loading...")):s.value?(S(),j("img",{key:1,src:s.value,alt:"Card thumbnail",class:"w-full h-full object-cover"},null,8,jn)):(S(),j("div",Nn,"No image"))]))}});function Kn(){const t=q(null),e=q(null),a=q(!1),n=q("environment"),o=q({}),s=()=>!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia);async function i(O="environment"){if(!s())return e.value="Camera API not supported",!1;try{n.value=O;const T={video:{facingMode:{ideal:O},width:{ideal:1920},height:{ideal:1080}},audio:!1};t.value=await navigator.mediaDevices.getUserMedia(T),a.value=!0,e.value=null;const G=t.value.getVideoTracks()[0];if(G){const M=G.getCapabilities();o.value={torch:M.torch!==void 0,zoom:M.zoom!==void 0,focusMode:M.focusMode||[]}}return!0}catch(T){return console.error("Camera access error:",T),T instanceof Error&&(T.name==="NotAllowedError"?e.value="Camera permission denied":T.name==="NotFoundError"?e.value="No camera found":e.value="Camera access failed"),!1}}function u(){t.value&&(t.value.getTracks().forEach(O=>O.stop()),t.value=null,a.value=!1)}async function d(O){if(!t.value||!o.value.torch)return!1;try{const T=t.value.getVideoTracks()[0];return T?(await T.applyConstraints({advanced:[{torch:O}]}),!0):!1}catch(T){return console.error("Torch toggle error:",T),!1}}async function l(O){if(!t.value)return!1;try{const T=t.value.getVideoTracks()[0];return T?(await T.applyConstraints({advanced:[{focusMode:O}]}),!0):!1}catch(T){return console.error("Focus mode error:",T),!1}}async function v(){const O=n.value==="user"?"environment":"user";return u(),await i(O)}function k(O){if(!t.value||!a.value)return null;try{const T=document.createElement("canvas");T.width=O.videoWidth,T.height=O.videoHeight;const G=T.getContext("2d");return G?(n.value==="user"&&(G.translate(T.width,0),G.scale(-1,1)),G.drawImage(O,0,0),new Promise(M=>{T.toBlob(c=>{M(c)},"image/jpeg",.9)})):null}catch(T){return console.error("Capture image error:",T),null}}return Se(()=>{u()}),{stream:t,error:e,isActive:a,facingMode:n,capabilities:o,isSupported:s,startCamera:i,stopCamera:u,toggleTorch:d,setFocusMode:l,switchCamera:v,captureImage:k}}const Gn={key:0,class:"p-8 text-center"},Wn={class:"text-muted-foreground mb-4"},Hn={class:"text-sm text-muted-foreground"},Yn={key:1,class:"p-8 text-center"},Jn={class:"text-destructive mb-4"},Zn={class:"text-sm text-muted-foreground"},Qn={key:2,class:"relative aspect-video bg-black overflow-hidden"},Xn=["src"],eo={key:1,class:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent"},to={class:"flex items-center justify-center gap-4"},ao={key:2,class:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent"},ro={class:"flex items-center justify-center gap-4"},no=W({__name:"CameraCapture",emits:["captured"],setup(t,{emit:e}){const{t:a}=va(),n=e,{stream:o,error:s,isActive:i,facingMode:u,capabilities:d,isSupported:l,startCamera:v,stopCamera:k,toggleTorch:O,switchCamera:T,captureImage:G}=Kn(),M=q(null),c=q(null),g=q(!1),E=q(!1),F=q(!1);Se(()=>{c.value&&URL.revokeObjectURL(c.value),k()}),pt(o,w=>{w&&M.value&&(M.value.srcObject=w)},{immediate:!0});async function L(){await O(!g.value)&&(g.value=!g.value)}async function N(){await T()}async function H(){if(!F.value&&!i.value)if(await v("environment"))F.value=!0,await new Promise(B=>setTimeout(B,500));else return;if(!M.value)return;E.value=!0;const w=await G(M.value);E.value=!1,w&&(c.value&&URL.revokeObjectURL(c.value),c.value=URL.createObjectURL(w),k())}function ee(){c.value&&fetch(c.value).then(w=>w.blob()).then(w=>{n("captured",w),R()})}async function R(){c.value&&(URL.revokeObjectURL(c.value),c.value=null),await v(u.value)}return(w,D)=>(S(),K(r(Ee),null,{default:h(()=>[b(r(Te),{class:"p-0"},{default:h(()=>[r(l)()?r(s)?(S(),j("div",Yn,[C("p",Jn,I(r(s)),1),C("p",Zn,I(r(a)("businessCardScanner.camera.permissionInstructions")),1)])):(S(),j("div",Qn,[Ae(C("video",{ref_key:"videoRef",ref:M,autoplay:"",playsinline:"",class:ma(["w-full h-full object-cover",r(u)==="user"?"scale-x-[-1]":""])},null,2),[[Pa,!c.value&&r(i)]]),c.value?(S(),j("img",{key:0,src:c.value,alt:"Captured business card",class:"w-full h-full object-contain"},null,8,Xn)):X("",!0),!c.value&&r(i)?(S(),j("div",eo,[C("div",to,[r(d).torch?(S(),K(r(ue),{key:0,variant:"ghost",size:"icon",class:"h-12 w-12 rounded-full bg-white/10 hover:bg-white/20 text-white",onClick:L},{default:h(()=>[g.value?(S(),K(r(qr),{key:0,size:24})):(S(),K(r($r),{key:1,size:24}))]),_:1})):X("",!0),b(r(ue),{size:"icon",class:"h-16 w-16 rounded-full bg-white hover:bg-white/90",disabled:E.value,onClick:H},{default:h(()=>[b(r(Br),{size:28,class:"text-black"})]),_:1},8,["disabled"]),b(r(ue),{variant:"ghost",size:"icon",class:"h-12 w-12 rounded-full bg-white/10 hover:bg-white/20 text-white",onClick:N},{default:h(()=>[b(r(Pr),{size:24})]),_:1})])])):X("",!0),c.value?(S(),j("div",ao,[C("div",ro,[b(r(ue),{variant:"ghost",size:"icon",class:"h-12 w-12 rounded-full bg-white/10 hover:bg-white/20 text-white",onClick:R},{default:h(()=>[b(r(Lt),{size:24})]),_:1}),b(r(ue),{size:"lg",class:"px-8 rounded-full bg-white hover:bg-white/90 text-black",onClick:ee},{default:h(()=>[b(r(Ya),{size:20,class:"mr-2"}),Y(" "+I(r(a)("businessCardScanner.camera.useThisImage")),1)]),_:1})])])):X("",!0)])):(S(),j("div",Gn,[C("p",Wn,I(r(a)("businessCardScanner.camera.notSupported")),1),C("p",Hn,I(r(a)("businessCardScanner.camera.useUploadInstead")),1)]))]),_:1})]),_:1}))}}),oo=W({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(t,{emit:e}){const o=It(t,e);return(s,i)=>(S(),K(r(Qa),St(kt(r(o))),{default:h(()=>[Z(s.$slots,"default")]),_:3},16))}}),so=W({__name:"DialogContent",props:{forceMount:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const a=t,n=e,o=Pe(a,"class"),s=It(o,n);return(i,u)=>(S(),K(r(pr),null,{default:h(()=>[b(r(dr),{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),b(r(ir),ce(r(s),{class:r(Ie)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a.class)}),{default:h(()=>[Z(i.$slots,"default"),b(r(er),{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground"},{default:h(()=>[b(r(Lt),{class:"w-4 h-4"}),u[0]||(u[0]=C("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}}),io={class:"absolute top-4 right-4 z-10"},lo={class:"relative w-full min-h-[400px] max-h-[80vh] bg-black flex items-center justify-center"},uo={key:0,class:"text-white"},co=["src"],fo={key:2,class:"text-white"},po=W({__name:"ImageViewer",props:{imageId:{},open:{type:Boolean}},emits:["update:open"],setup(t,{emit:e}){const a=t,n=e,o=Rt(),s=q(null),i=q(!1);pt([()=>a.imageId,()=>a.open],async([l,v])=>{if(l&&v){i.value=!0;try{s.value=await o.getCardImageUrl(l)}catch(k){console.error("Failed to load full-size image:",k)}finally{i.value=!1}}},{immediate:!0}),pt(()=>a.open,l=>{!l&&s.value&&(URL.revokeObjectURL(s.value),s.value=null)}),Se(()=>{s.value&&URL.revokeObjectURL(s.value)});function u(){n("update:open",!1)}function d(l){l.key==="Escape"&&a.open&&u()}return be(()=>{document.addEventListener("keydown",d)}),Se(()=>{document.removeEventListener("keydown",d)}),(l,v)=>(S(),K(r(oo),{open:t.open,"onUpdate:open":u},{default:h(()=>[b(r(so),{class:"max-w-4xl w-full p-0"},{default:h(()=>[C("div",io,[b(r(ue),{variant:"ghost",size:"icon",class:"rounded-full bg-black/50 hover:bg-black/70 text-white",onClick:u},{default:h(()=>[b(r(Lt),{size:20})]),_:1})]),C("div",lo,[i.value?(S(),j("div",uo,"Loading...")):s.value?(S(),j("img",{key:1,src:s.value,alt:"Full-size business card",class:"max-w-full max-h-[80vh] object-contain"},null,8,co)):(S(),j("div",fo,"No image available"))])]),_:1})]),_:1},8,["open"]))}}),mo={class:"min-h-screen p-4 bg-gradient-to-b from-background to-muted/20"},vo={class:"container mx-auto max-w-7xl space-y-6"},go={class:"text-center"},ho={class:"text-3xl md:text-4xl font-bold mb-2"},yo={class:"text-lg text-muted-foreground"},bo={class:"flex gap-4"},wo={key:0,class:"border rounded-lg p-4"},_o=["src"],Co={key:0,class:"space-y-2 mt-4"},So={class:"text-sm text-muted-foreground"},ko={class:"w-full bg-secondary rounded-full h-2"},Io={class:"text-xs text-center"},Oo={key:1,class:"space-y-4 border-t pt-4 mt-4"},Lo={class:"font-semibold"},Ro={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xo=["placeholder"],To={class:"flex gap-2"},Eo={class:"flex justify-between items-center"},Mo={key:0,class:"flex gap-4 mb-4"},Do={value:"date"},Ao={value:"name"},Bo={value:"company"},Po={key:1,class:"text-center py-12"},$o={class:"text-muted-foreground mb-2"},qo={class:"text-sm text-muted-foreground"},Fo={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Uo={class:"space-y-1 text-sm"},Vo={key:0,class:"flex items-start gap-2"},jo={class:"text-muted-foreground min-w-[60px]"},No={class:"flex-1"},zo={key:1,class:"flex items-start gap-2"},Ko={class:"text-muted-foreground min-w-[60px]"},Go={class:"flex-1"},Wo={key:2,class:"flex items-start gap-2"},Ho={class:"text-muted-foreground min-w-[60px]"},Yo={class:"flex-1 break-all"},Jo={key:3,class:"flex items-start gap-2"},Zo={class:"text-muted-foreground min-w-[60px]"},Qo={class:"flex-1 break-all"},Xo={key:4,class:"flex items-start gap-2"},es={class:"text-muted-foreground min-w-[60px]"},ts={class:"flex-1"},as={key:5,class:"flex items-start gap-2"},rs={class:"text-muted-foreground min-w-[60px]"},ns={class:"flex-1 break-all"},os={key:6,class:"flex items-start gap-2"},ss={class:"text-muted-foreground min-w-[60px]"},is={class:"flex-1"},ls={key:0,class:"pt-2 border-t"},us={class:"text-xs text-muted-foreground mb-1"},cs={class:"bg-muted/50 rounded p-2 text-xs font-mono whitespace-pre-wrap break-words max-h-24 overflow-y-auto"},ds={class:"flex items-center justify-between pt-2 border-t"},fs={class:"flex gap-2"},ps={key:0},ms={key:1},Ss=W({__name:"BusinessCardScannerView",setup(t){const{t:e}=va(),a=Rt(),n=q("camera"),o=q(!1),s=q(0),i=q(null),u=q(null),d=q(null),l=q({}),v=q(""),k=q(""),O=q("date"),T=q(!1),G=q(null),M=q(null),c=q(0);be(()=>{const P=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);n.value=P?"camera":"upload"});const g=ie(()=>{const P=a.searchCards(k.value);return a.sortCards(P,O.value)});be(async()=>{await a.loadCards()});async function E(P){const m=P.target.files?.[0];if(m){if(!dn(m)){i.value=e("businessCardScanner.invalidFileType");return}await L(m)}}async function F(P){await L(P)}async function L(P){o.value=!0,i.value=null,s.value=0;try{u.value=P,d.value&&Ft(d.value),d.value=fn(P);const _=Oa();await _.isReady();const m=await _.recognize(P,Q=>{s.value=Math.round(Q)});l.value=m.extractedData,v.value=m.text}catch(_){console.error("OCR processing error:",_),i.value=e("businessCardScanner.scanError")}finally{o.value=!1}}async function N(){if(!u.value){i.value="No image captured";return}try{await a.addCard(l.value,v.value,u.value),H(),alert(e("businessCardScanner.messages.cardSaved"))}catch(P){console.error("Save card error:",P),i.value=e("businessCardScanner.messages.saveFailed")}}function H(){l.value={},v.value="",u.value=null,d.value&&(Ft(d.value),d.value=null),i.value=null,s.value=0}async function ee(P){if(confirm(e("businessCardScanner.confirm.deleteMessage")))try{await a.deleteCard(P),alert(e("businessCardScanner.messages.cardDeleted"))}catch(_){console.error("Delete card error:",_),i.value=e("businessCardScanner.messages.deleteFailed")}}function R(){try{const P=a.exportToJson(),_=new Blob([P],{type:"application/json"}),m=URL.createObjectURL(_),Q=document.createElement("a");Q.href=m,Q.download=`business-cards-${new Date().toISOString().split("T")[0]}.json`,Q.click(),URL.revokeObjectURL(m),alert(e("businessCardScanner.export.downloadSuccess"))}catch(P){console.error("Export error:",P),i.value=e("businessCardScanner.export.exportError")}}function w(P){return new Date(P).toLocaleDateString()}function D(P){G.value=P,T.value=!0}async function B(P){if(confirm(e("businessCardScanner.confirm.rescanMessage"))){M.value=P,c.value=0,i.value=null;try{await a.rescanCard(P,_=>{c.value=Math.round(_)}),alert(e("businessCardScanner.messages.rescanSuccess"))}catch(_){console.error("Rescan error:",_),i.value=e("businessCardScanner.messages.rescanFailed")}finally{M.value=null,c.value=0}}}return(P,_)=>(S(),j("main",mo,[C("div",vo,[C("div",go,[C("h1",ho,I(r(e)("businessCardScanner.title")),1),C("p",yo,I(r(e)("businessCardScanner.subtitle")),1)]),i.value?(S(),K(r(Ua),{key:0,variant:"destructive",class:"mb-4"},{default:h(()=>[b(r(Va),null,{default:h(()=>[Y(I(i.value),1)]),_:1})]),_:1})):X("",!0),b(r(Ee),null,{default:h(()=>[b(r(Ue),null,{default:h(()=>[b(r(Ve),null,{default:h(()=>[Y(I(r(e)("businessCardScanner.capture.title")),1)]),_:1}),b(r(je),null,{default:h(()=>[Y(I(r(e)("businessCardScanner.capture.description")),1)]),_:1})]),_:1}),b(r(Te),null,{default:h(()=>[b(r(qn),{modelValue:n.value,"onUpdate:modelValue":_[0]||(_[0]=m=>n.value=m),class:"w-full"},{default:h(()=>[b(r(Fn),{class:"grid w-full grid-cols-2 mb-4"},{default:h(()=>[b(r(ua),{value:"camera"},{default:h(()=>[Y(I(r(e)("businessCardScanner.tabs.camera")),1)]),_:1}),b(r(ua),{value:"upload"},{default:h(()=>[Y(I(r(e)("businessCardScanner.tabs.upload")),1)]),_:1})]),_:1}),b(r(la),{value:"camera",class:"space-y-4"},{default:h(()=>[b(no,{onCaptured:F})]),_:1}),b(r(la),{value:"upload",class:"space-y-4"},{default:h(()=>[C("div",bo,[b(r(le),{type:"file",accept:"image/jpeg,image/png,image/webp",onChange:E,disabled:o.value},null,8,["disabled"])]),d.value?(S(),j("div",wo,[C("img",{src:d.value,alt:"Card preview",class:"max-w-full h-auto max-h-64 mx-auto"},null,8,_o)])):X("",!0)]),_:1})]),_:1},8,["modelValue"]),o.value?(S(),j("div",Co,[C("p",So,I(r(e)("businessCardScanner.scanning")),1),C("div",ko,[C("div",{class:"bg-primary h-2 rounded-full transition-all",style:fa({width:`${s.value}%`})},null,4)]),C("p",Io,I(s.value)+"%",1)])):X("",!0),u.value&&!o.value?(S(),j("div",Oo,[C("h3",Lo,I(r(e)("businessCardScanner.form.title")),1),C("div",Ro,[C("div",null,[b(r(me),null,{default:h(()=>[Y(I(r(e)("businessCardScanner.fields.name")),1)]),_:1}),b(r(le),{modelValue:l.value.name,"onUpdate:modelValue":_[1]||(_[1]=m=>l.value.name=m)},null,8,["modelValue"])]),C("div",null,[b(r(me),null,{default:h(()=>[Y(I(r(e)("businessCardScanner.fields.title")),1)]),_:1}),b(r(le),{modelValue:l.value.title,"onUpdate:modelValue":_[2]||(_[2]=m=>l.value.title=m)},null,8,["modelValue"])]),C("div",null,[b(r(me),null,{default:h(()=>[Y(I(r(e)("businessCardScanner.fields.company")),1)]),_:1}),b(r(le),{modelValue:l.value.company,"onUpdate:modelValue":_[3]||(_[3]=m=>l.value.company=m)},null,8,["modelValue"])]),C("div",null,[b(r(me),null,{default:h(()=>[Y(I(r(e)("businessCardScanner.fields.phone")),1)]),_:1}),b(r(le),{modelValue:l.value.phone,"onUpdate:modelValue":_[4]||(_[4]=m=>l.value.phone=m)},null,8,["modelValue"])]),C("div",null,[b(r(me),null,{default:h(()=>[Y(I(r(e)("businessCardScanner.fields.email")),1)]),_:1}),b(r(le),{modelValue:l.value.email,"onUpdate:modelValue":_[5]||(_[5]=m=>l.value.email=m),type:"email"},null,8,["modelValue"])]),C("div",null,[b(r(me),null,{default:h(()=>[Y(I(r(e)("businessCardScanner.fields.website")),1)]),_:1}),b(r(le),{modelValue:l.value.website,"onUpdate:modelValue":_[6]||(_[6]=m=>l.value.website=m)},null,8,["modelValue"])]),C("div",null,[b(r(me),null,{default:h(()=>[Y(I(r(e)("businessCardScanner.fields.fax")),1)]),_:1}),b(r(le),{modelValue:l.value.fax,"onUpdate:modelValue":_[7]||(_[7]=m=>l.value.fax=m)},null,8,["modelValue"])]),C("div",null,[b(r(me),null,{default:h(()=>[Y(I(r(e)("businessCardScanner.fields.socialMedia")),1)]),_:1}),b(r(le),{modelValue:l.value.socialMedia,"onUpdate:modelValue":_[8]||(_[8]=m=>l.value.socialMedia=m)},null,8,["modelValue"])])]),C("div",null,[b(r(me),null,{default:h(()=>[Y(I(r(e)("businessCardScanner.fields.address")),1)]),_:1}),b(r(le),{modelValue:l.value.address,"onUpdate:modelValue":_[9]||(_[9]=m=>l.value.address=m)},null,8,["modelValue"])]),C("div",null,[b(r(me),null,{default:h(()=>[Y(I(r(e)("businessCardScanner.fields.rawOcr")),1)]),_:1}),Ae(C("textarea",{"onUpdate:modelValue":_[10]||(_[10]=m=>v.value=m),readonly:"",class:"w-full min-h-[100px] p-2 border rounded-md bg-muted text-sm font-mono whitespace-pre-wrap",placeholder:r(e)("businessCardScanner.fields.rawOcr")},null,8,xo),[[pa,v.value]])]),C("div",To,[b(r(ue),{onClick:N,class:"flex-1"},{default:h(()=>[Y(I(r(e)("businessCardScanner.actions.save")),1)]),_:1}),b(r(ue),{onClick:H,variant:"outline"},{default:h(()=>[Y(I(r(e)("businessCardScanner.actions.cancel")),1)]),_:1})])])):X("",!0)]),_:1})]),_:1}),b(r(Ee),null,{default:h(()=>[b(r(Ue),null,{default:h(()=>[C("div",Eo,[C("div",null,[b(r(Ve),null,{default:h(()=>[Y(I(r(e)("businessCardScanner.list.title")),1)]),_:1}),b(r(je),null,{default:h(()=>[Y(I(r(e)("businessCardScanner.list.count",{count:r(a).cardCount})),1)]),_:1})]),r(a).hasCards?(S(),K(r(ue),{key:0,onClick:R,variant:"outline"},{default:h(()=>[Y(I(r(e)("businessCardScanner.actions.exportAll")),1)]),_:1})):X("",!0)])]),_:1}),b(r(Te),null,{default:h(()=>[r(a).hasCards?(S(),j("div",Mo,[b(r(le),{modelValue:k.value,"onUpdate:modelValue":_[11]||(_[11]=m=>k.value=m),placeholder:r(e)("businessCardScanner.list.search"),class:"flex-1"},null,8,["modelValue","placeholder"]),Ae(C("select",{"onUpdate:modelValue":_[12]||(_[12]=m=>O.value=m),class:"border rounded-md px-3 py-2"},[C("option",Do,I(r(e)("businessCardScanner.list.sortDate")),1),C("option",Ao,I(r(e)("businessCardScanner.list.sortName")),1),C("option",Bo,I(r(e)("businessCardScanner.list.sortCompany")),1)],512),[[$a,O.value]])])):X("",!0),r(a).hasCards?(S(),j("div",Fo,[(S(!0),j(qa,null,Fa(g.value,m=>(S(),K(r(Ee),{key:m.id,class:"hover:shadow-lg transition-shadow"},{default:h(()=>[b(r(Ue),null,{default:h(()=>[b(zn,{"image-id":m.imageId,onClick:Q=>D(m.imageId)},null,8,["image-id","onClick"])]),_:2},1024),b(r(Te),{class:"space-y-2"},{default:h(()=>[b(r(Ve),{class:"text-lg"},{default:h(()=>[Y(I(m.data.name||"Unknown"),1)]),_:2},1024),b(r(je),null,{default:h(()=>[Y(I(m.data.title),1)]),_:2},1024),C("div",Uo,[m.data.company?(S(),j("p",Vo,[C("span",jo,I(r(e)("businessCardScanner.fields.company"))+":",1),C("span",No,I(m.data.company),1)])):X("",!0),m.data.phone?(S(),j("p",zo,[C("span",Ko,I(r(e)("businessCardScanner.fields.phone"))+":",1),C("span",Go,I(m.data.phone),1)])):X("",!0),m.data.email?(S(),j("p",Wo,[C("span",Ho,I(r(e)("businessCardScanner.fields.email"))+":",1),C("span",Yo,I(m.data.email),1)])):X("",!0),m.data.website?(S(),j("p",Jo,[C("span",Zo,I(r(e)("businessCardScanner.fields.website"))+":",1),C("span",Qo,I(m.data.website),1)])):X("",!0),m.data.fax?(S(),j("p",Xo,[C("span",es,I(r(e)("businessCardScanner.fields.fax"))+":",1),C("span",ts,I(m.data.fax),1)])):X("",!0),m.data.socialMedia?(S(),j("p",as,[C("span",rs,I(r(e)("businessCardScanner.fields.socialMedia"))+":",1),C("span",ns,I(m.data.socialMedia),1)])):X("",!0),m.data.address?(S(),j("p",os,[C("span",ss,I(r(e)("businessCardScanner.fields.address"))+":",1),C("span",is,I(m.data.address),1)])):X("",!0)]),m.rawOcr?(S(),j("div",ls,[C("p",us,I(r(e)("businessCardScanner.fields.rawOcr"))+":",1),C("div",cs,I(m.rawOcr),1)])):X("",!0),C("div",ds,[b(r(ja),{variant:"secondary"},{default:h(()=>[Y(I(w(m.timestamp)),1)]),_:2},1024),C("div",fs,[b(r(ue),{onClick:Q=>B(m.id),variant:"outline",size:"sm",disabled:M.value===m.id},{default:h(()=>[M.value===m.id?(S(),j("span",ps,I(r(e)("businessCardScanner.actions.rescanning"))+" "+I(c.value)+"% ",1)):(S(),j("span",ms,I(r(e)("businessCardScanner.actions.rescan")),1))]),_:2},1032,["onClick","disabled"]),b(r(ue),{onClick:Q=>ee(m.id),variant:"ghost",size:"sm"},{default:h(()=>[Y(I(r(e)("businessCardScanner.actions.delete")),1)]),_:1},8,["onClick"])])])]),_:2},1024)]),_:2},1024))),128))])):(S(),j("div",Po,[C("p",$o,I(r(e)("businessCardScanner.list.empty")),1),C("p",qo,I(r(e)("businessCardScanner.list.emptyMessage")),1)]))]),_:1})]),_:1})]),b(po,{"image-id":G.value,open:T.value,"onUpdate:open":_[13]||(_[13]=m=>T.value=m)},null,8,["image-id","open"])]))}});export{Ss as default};
